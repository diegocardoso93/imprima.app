(this.webpackJsonpwasp=this.webpackJsonpwasp||[]).push([[0],{22:function(e,t,c){},23:function(e,t,c){},25:function(e,t,c){},26:function(e,t,c){},27:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c.n(n),a=c(15),s=c.n(a),o=(c(22),c(17)),r=c(2),l=c(3),d="https://imprima.app/api",j="".concat(d,"/kind/{id}"),u="".concat(d,"/produto/{id}"),b="".concat(d,"/cep/{id}/{cep}"),h="".concat(d,"/category"),O="".concat(d,"/category/{categoryId}/type/{typeId}"),x="".concat(d,"/attributes/{productId}/{merchantId}"),m="".concat(d,"/checkout/preference"),v=(c(23),c(0));function p(e){var t=e.children,c=e.stackclose;return Object(v.jsxs)("div",{className:"header",children:[t,Object(v.jsx)("div",{className:"close",onClick:function(){history.go(c),parent.postMessage({active:!1},"*")},children:"\xd7"})]})}c(25);function f(e){var t=e.children;return Object(v.jsx)("div",{className:"body",children:t})}c(26);function g(e){var t=e.size;return Object(v.jsxs)("div",{className:"lds-ring ".concat(t),children:[Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{})]})}c(27);function N(e){var t=e.size;return Object(v.jsx)("svg",{width:"23",height:"39",viewBox:"0 0 23 39",style:{transform:"scale(".concat("small"===t?"1":"0.8",")"),fill:"#444"},children:Object(v.jsx)("path",{className:"slideshow-arrow",d:"M857.005,231.479L858.5,230l18.124,18-18.127,18-1.49-1.48L873.638,248Z",transform:"translate(-855 -230)"})})}function w(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)(!1),s=Object(l.a)(a,2),o=s[0],d=s[1],u=Object(r.f)();Object(n.useEffect)((function(){var e=0;return window.onbeforeunload=function(t){0==e&&(b(),e=1)},window.onpopstate=function(e){b()},function(){window.onbeforeunload=function(){},window.onpopstate=function(){}}}),[]);var b=function(){parent.postMessage({active:!1},"*")};return Object(n.useEffect)((function(){d(!0),fetch(j.replace("{id}",localStorage.getItem("kindId")||"")).then((function(e){return e.json()})).then((function(e){i(e),d(!1)}))}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p,{stackclose:-1,children:Object(v.jsxs)("div",{className:"logo",children:[Object(v.jsx)("a",{href:"https://imprima.app",target:"_blank",rel:"noreferrer",className:"logo-link",children:Object(v.jsx)("div",{className:"inner",children:Object(v.jsx)("img",{src:"/img/logo_100.png",alt:""})})}),Object(v.jsx)("h1",{children:"Comprar personalizado"})]})}),Object(v.jsx)(f,{children:o&&Object(v.jsx)("div",{className:"loader-container",children:Object(v.jsx)(g,{size:"large"})})||Object(v.jsx)("div",{className:"page-items",children:Object(v.jsx)("div",{className:"options",children:c.map((function(e){return Object(v.jsxs)("div",{className:"option",onClick:function(){return function(e){u.push("/alo/produto/".concat(e.id).concat(location.search))}(e)},children:[Object(v.jsxs)("div",{className:"left",children:[Object(v.jsx)("img",{src:e.thumb_url,alt:"",className:"image"}),Object(v.jsx)("span",{children:e.name})]}),Object(v.jsx)("span",{className:"select",children:Object(v.jsx)(N,{})})]},e.name)}))})})})]})}c(33);function k(){return Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(v.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(v.jsx)("path",{d:"M0 0H16V16H0z",transform:"matrix(1 0 0 -1 0 16)"}),Object(v.jsx)("path",{fill:"#444",fillRule:"nonzero",d:"M7.631 1.333L6.368 0 0 6.667 6.368 13.333 7.631 12.001 3.428 7.6 13.333 7.601 13.333 5.743 3.418 5.742z",transform:"matrix(1 0 0 -1 0 16) translate(1.333 1.333)"})]})})}function y(){var e=Object(r.g)().id,t=Object(n.useState)(!1),c=Object(l.a)(t,2),i=c[0],a=c[1],s=Object(n.useState)(!1),o=Object(l.a)(s,2),d=o[0],j=o[1],x=Object(n.useState)(null),m=Object(l.a)(x,2),w=m[0],y=m[1],S=Object(n.useState)(null),I=Object(l.a)(S,2),C=I[0],_=I[1],z=Object(n.useState)(null),F=Object(l.a)(z,2),R=F[0],B=F[1],E=Object(n.useState)({loading:!1,show:!1}),J=Object(l.a)(E,2),M=J[0],P=J[1],q=Object(n.useState)(!0),L=Object(l.a)(q,2),$=L[0],V=L[1],W=Object(n.useRef)(),H=Object(n.useState)(),T=Object(l.a)(H,2),U=T[0],A=T[1],D=Object(n.useState)(!1),K=Object(l.a)(D,2),Q=K[0],Z=K[1],G=Object(r.f)();function X(){j(!0);var t=W.current.value;fetch(b.replace("{id}",e).replace("{cep}",t)).then((function(e){return e.json()})).then((function(e){j(!1),y(e.merchants),localStorage.setItem("address",JSON.stringify(e.address))})).catch((function(e){return j(!1)}))}return Object(n.useEffect)((function(){a(!0),fetch(u.replace("{id}",e)).then((function(e){return e.json()})).then((function(e){a(!1),A(e);var t=JSON.parse(localStorage.getItem("address"));(null===t||void 0===t?void 0:t.zip)&&(W.current.value=t.zip,X())})).catch((function(e){return a(!1)}))}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p,{stackclose:-2,children:Object(v.jsxs)("div",{className:"title",children:[Object(v.jsx)("div",{onClick:function(){return G.goBack()},children:Object(v.jsx)(k,{})}),Object(v.jsx)("div",{children:null===U||void 0===U?void 0:U.name})]})}),Object(v.jsx)(f,{children:i&&Object(v.jsx)("div",{className:"loader-container",children:Object(v.jsx)(g,{size:"large"})})||Object(v.jsxs)("div",{className:"page-detail",children:[Object(v.jsxs)("div",{className:"item ".concat(!$&&"hidden"),children:[Object(v.jsx)("img",{src:null===U||void 0===U?void 0:U.url,alt:null===U||void 0===U?void 0:U.name}),Object(v.jsxs)("div",{className:"hcategory",children:[Object(v.jsxs)("div",{className:"switch-container",children:["trocar estampa",Object(v.jsxs)("label",{className:"switch",children:[Object(v.jsx)("input",{type:"checkbox",onChange:function(){M.show?P({loading:!1,show:!1}):(P({loading:!0,show:!0}),fetch(h,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){P({loading:!1,show:!0}),_(e)})).catch((function(e){return P({loading:!1,show:!1})})))}}),Object(v.jsx)("span",{className:"slider round"})]})]}),Object(v.jsx)("div",{className:"category-container",children:M.show&&(M.loading&&Object(v.jsx)(g,{})||Object(v.jsxs)("select",{onChange:function(e){var t=e.target.value;Z(!0),fetch(O.replace("{categoryId}",t).replace("{typeId}",U.type_id),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){B(e),Z(!1)})).catch((function(e){return Z(!1)}))},children:[Object(v.jsx)("option",{children:"selecione"}),null===C||void 0===C?void 0:C.map((function(e){return Object(v.jsx)("option",{value:e.id,children:e.name},e.id)}))]}))})]}),Object(v.jsx)("div",{className:"image-list",children:M.show&&(Q&&Object(v.jsx)(g,{})||R&&R.map((function(e){return Object(v.jsx)("img",{src:e.thumb_url,onClick:function(){A(e)}},e.id)})))})]}),Object(v.jsxs)("div",{className:"stores",children:[Object(v.jsxs)("div",{className:"find",children:[Object(v.jsx)("button",{onClick:function(){return V(!$)},children:Object(v.jsx)("span",{className:"".concat($?"bottom":"top"),children:"\xbb"})}),Object(v.jsx)("input",{ref:W,onKeyUp:function(e){"Enter"===e.key&&X()},placeholder:"Digite seu CEP",onFocus:function(){return window.innerWidth<600&&V(!1)}}),Object(v.jsx)("button",{onClick:function(){return X()},children:d&&Object(v.jsx)(g,{})||"\ud83d\udd0d"})]}),Object(v.jsx)("div",{className:"list",children:w&&((null===w||void 0===w?void 0:w.length)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"item",children:[Object(v.jsx)("div",{className:"i1 b",children:"Fornecedor"}),Object(v.jsx)("div",{className:"i2 b",children:"Pre\xe7o"}),Object(v.jsx)("div",{className:"i3 b",children:"Frete"}),Object(v.jsx)("span",{className:"i5",children:"\xa0"})]}),w.map((function(e){return Object(v.jsxs)("div",{className:"item",children:[Object(v.jsxs)("div",{className:"i1",children:[e.name,Object(v.jsx)("br",{}),Object(v.jsxs)("span",{className:"small",children:[e.city," - ",e.uf]})]}),Object(v.jsxs)("div",{className:"i2",children:[Object(v.jsx)("div",{className:"small",children:"a partir de"}),"R$",e.price]}),Object(v.jsx)("div",{className:"i3",children:e.delivery}),Object(v.jsx)("span",{className:"i5",onClick:function(){return function(e){G.push("/alo/checkout/".concat(U.id,"/").concat(e.id).concat(location.search))}(e)},children:Object(v.jsx)(N,{size:"small"})})]},e.id)}))]})||Object(v.jsx)("h3",{children:"Nenhum fornecedor na sua localidade."}))})]})]})})]})}function S(e){var t=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},c=e?function(c){return t(e,c)}:function(e,c){return t(e,c)},n=function(e){return JSON.parse(localStorage.getItem(e))};return[e?n(e):function(e){return n(e)},c]}c(34);function I(){var e=Object(r.g)(),t=e.productId,c=e.merchantId,i=Object(r.f)(),a=S("checkout"),s=Object(l.a)(a,2),o=(s[0],s[1]),d=Object(n.useState)(!1),j=Object(l.a)(d,2),u=j[0],b=j[1],h=Object(n.useState)(),O=Object(l.a)(h,2),m=O[0],N=O[1],w=Object(n.useState)(),y=Object(l.a)(w,2),I=y[0],C=y[1],_=Object(n.useState)(),z=Object(l.a)(_,2),F=z[0],R=z[1],B=Object(n.useState)(),E=Object(l.a)(B,2),J=E[0],M=E[1],P=Object(n.useState)(1),q=Object(l.a)(P,2),L=q[0],$=q[1],V=Object(n.useState)(0),W=Object(l.a)(V,2),H=W[0],T=W[1],U=Object(n.useState)(0),A=Object(l.a)(U,2),D=A[0],K=A[1];function Q(e,t){T(t),K(e*t)}return Object(n.useEffect)((function(){b(!0),fetch(x.replace("{productId}",t).replace("{merchantId}",c)).then((function(e){return e.json()})).then((function(e){N(e.product),R(e.attributes),C(e.merchant),b(!1)})).catch((function(e){return b(!1)}))}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p,{stackclose:-3,children:Object(v.jsxs)("div",{className:"title",children:[Object(v.jsx)("div",{onClick:function(){return i.goBack()},children:Object(v.jsx)(k,{})}),Object(v.jsx)("div",{children:null===I||void 0===I?void 0:I.name})]})}),Object(v.jsx)(f,{children:u&&Object(v.jsx)("div",{className:"loader-container",children:Object(v.jsx)(g,{size:"large"})})||Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"page-checkout",children:[Object(v.jsx)("h5",{children:null===m||void 0===m?void 0:m.name}),Object(v.jsxs)("div",{className:"first",children:[Object(v.jsx)("div",{className:"left-container",children:Object(v.jsx)("img",{src:null===m||void 0===m?void 0:m.url,alt:null===m||void 0===m?void 0:m.name})}),Object(v.jsxs)("div",{className:"right-container",children:[Object(v.jsxs)("div",{className:"attributes-container",children:[F&&F[0].type,Object(v.jsx)("div",{className:"options",children:null===F||void 0===F?void 0:F.map((function(e,t){return Object(v.jsx)("div",{className:"button-check ".concat((null===J||void 0===J?void 0:J.id)===e.id&&"selected"),onClick:function(){Q(L,e.price),M(e)},children:e.value},t)}))})]}),Object(v.jsxs)("div",{className:"quantity-container",children:[Object(v.jsx)("span",{children:"Quantidade"}),Object(v.jsx)("input",{type:"number",value:L,onChange:function(e){Q(e.target.value,H),$(e.target.value)}})]}),Object(v.jsxs)("div",{className:"price-container",children:[Object(v.jsx)("span",{children:"Pre\xe7o final"}),Object(v.jsxs)("div",{children:["R$",D]})]})]})]}),Object(v.jsx)("div",{className:"next",children:Object(v.jsx)("button",{onClick:function(){H?(o({attribute:J,product:m,merchant:I,quantity:L}),i.push("/alo/checkout-info".concat(location.search))):alert("escolha o tamanho e a quantidade")},children:"Continuar"})})]})})})]})}c(35);function C(){var e=S("checkout"),t=Object(l.a)(e,2),c=t[0],i=(t[1],Object(r.f)()),a=Object(n.useState)(),s=Object(l.a)(a,2),o=s[0],d=s[1],j=c.attribute,u=c.merchant,b=c.product,h=c.quantity;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p,{stackclose:-4,children:Object(v.jsxs)("div",{className:"title",children:[Object(v.jsx)("div",{onClick:function(){return i.goBack()},children:Object(v.jsx)(k,{})}),Object(v.jsx)("div",{children:"Resumo do pedido"})]})}),Object(v.jsx)(f,{children:Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"page-checkout-info",children:[Object(v.jsxs)("div",{className:"product-details",children:[h," ",null===b||void 0===b?void 0:b.name,Object(v.jsx)("br",{}),null===j||void 0===j?void 0:j.type,": ",null===j||void 0===j?void 0:j.value,Object(v.jsx)("br",{}),"Valor a pagar: R$",h*(null===j||void 0===j?void 0:j.price)]}),Object(v.jsxs)("h5",{children:["Vendedor: ",Object(v.jsx)("br",{}),null===u||void 0===u?void 0:u.name," - ",null===u||void 0===u?void 0:u.phone,Object(v.jsxs)("div",{children:[null===u||void 0===u?void 0:u.address,", ",null===u||void 0===u?void 0:u.address_extra," -"," ",null===u||void 0===u?void 0:u.neighborhood,", ",null===u||void 0===u?void 0:u.city,", ",null===u||void 0===u?void 0:u.uf]})]}),Object(v.jsxs)("div",{className:"buyer",children:[Object(v.jsx)("div",{children:"Complete seus dados"}),Object(v.jsx)("input",{placeholder:"Nome completo"}),Object(v.jsx)("input",{placeholder:"Rua, bairro, n\xfamero, complemento"}),Object(v.jsx)("input",{placeholder:"Cidade"}),Object(v.jsx)("input",{placeholder:"Celular"}),o&&Object(v.jsx)(g,{})||Object(v.jsx)("button",{onClick:function(){return d(!0),void fetch(m,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({product_id:null===b||void 0===b?void 0:b.id,merchant_type_attribute_id:null===j||void 0===j?void 0:j.id,quantity:h,merchant:null===u||void 0===u?void 0:u.id})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.sandbox_init_point&&(parent.location.href=e.sandbox_init_point),d(!1)})).catch((function(e){return d(!1)}))},children:"Pagar"})]})]})})})]})}var _=function(){return Object(v.jsx)(o.a,{children:Object(v.jsxs)(r.c,{children:[Object(v.jsx)(r.a,{path:"/alo/",exact:!0,children:Object(v.jsx)(w,{})}),Object(v.jsx)(r.a,{path:"/alo/produto/:id",children:Object(v.jsx)(y,{})}),Object(v.jsx)(r.a,{path:"/alo/checkout/:productId/:merchantId",children:Object(v.jsx)(I,{})}),Object(v.jsx)(r.a,{path:"/alo/checkout-info",children:Object(v.jsx)(C,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=new URLSearchParams(window.location.search);localStorage.setItem("kindId",z.get("kindId")||"2"),localStorage.setItem("imprimaId",z.get("imprimaId")||""),s.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(_,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.23ae6b31.chunk.js.map