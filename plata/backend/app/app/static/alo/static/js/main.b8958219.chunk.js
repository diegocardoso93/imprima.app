(this.webpackJsonpwasp=this.webpackJsonpwasp||[]).push([[0],{102:function(e,t,c){},108:function(e,t){},109:function(e,t){},110:function(e,t){},119:function(e,t,c){},120:function(e,t,c){},121:function(e,t,c){},122:function(e,t,c){},124:function(e,t,c){},223:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c.n(n),a=c(46),s=c.n(a),r=(c(92),c(87)),o=c(3),l=c(2),d="https://imprima.app/api",j="".concat(d,"/product/?kind_id={kindId}"),u="".concat(d,"/product/{id}"),b="".concat(d,"/merchant/?type_id={id}&cep={cep}"),m=("".concat(d,"/category"),"".concat(d,"/product/?category_id={categoryId}&type_id={typeId}"),"".concat(d,"/merchant_type_attribute/?type_id={typeId}&merchant_id={merchantId}")),h="".concat(d,"/checkout/preference"),O="".concat(d,"/image"),p=(c(93),c(0));function f(e){var t=e.children,c=e.stackclose;return Object(p.jsxs)("div",{className:"header",children:[t,Object(p.jsx)("div",{className:"close",onClick:function(){history.go(c),parent.postMessage({active:!1},"*")},children:"\xd7"})]})}c(95);function v(e){var t=e.children;return Object(p.jsx)("div",{className:"body",children:t})}c(96);function x(e){var t=e.size;return Object(p.jsxs)("div",{className:"lds-ring ".concat(t),children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{})]})}c(97);function g(e){var t=e.size;return Object(p.jsx)("svg",{width:"23",height:"39",viewBox:"0 0 23 39",style:{transform:"scale(".concat("small"===t?"1":"0.8",")"),fill:"#444"},children:Object(p.jsx)("path",{className:"slideshow-arrow",d:"M857.005,231.479L858.5,230l18.124,18-18.127,18-1.49-1.48L873.638,248Z",transform:"translate(-855 -230)"})})}function C(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)(!1),s=Object(l.a)(a,2),r=s[0],d=s[1],u=Object(o.f)();Object(n.useEffect)((function(){var e=0;return window.onbeforeunload=function(t){0==e&&(b(),e=1)},window.onpopstate=function(e){b()},function(){window.onbeforeunload=function(){},window.onpopstate=function(){}}}),[]);var b=function(){parent.postMessage({active:!1},"*")};return Object(n.useEffect)((function(){d(!0),fetch(j.replace("{kindId}",localStorage.getItem("kindId")||"")).then((function(e){return e.json()})).then((function(e){i(e),d(!1)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{stackclose:-1,children:Object(p.jsxs)("div",{className:"logo",children:[Object(p.jsx)("a",{href:"https://imprima.app",target:"_blank",rel:"noreferrer",className:"logo-link",children:Object(p.jsx)("div",{className:"inner",children:Object(p.jsx)("img",{src:"https://imprima.app/img/logo_100.png",alt:""})})}),Object(p.jsx)("h1",{children:"Comprar personalizado"})]})}),Object(p.jsx)(v,{children:r&&Object(p.jsx)("div",{className:"loader-container",children:Object(p.jsx)(x,{size:"large"})})||Object(p.jsx)("div",{className:"page-items",children:Object(p.jsx)("div",{className:"options",children:c.map((function(e){return Object(p.jsxs)("div",{className:"option",onClick:function(){return function(e){u.push("/alo/produto/".concat(e.id).concat(location.search))}(e)},children:[Object(p.jsxs)("div",{className:"left",children:[Object(p.jsx)("img",{src:e.thumb_url,alt:"",className:"image"}),Object(p.jsx)("span",{children:e.name})]}),Object(p.jsx)("span",{className:"select",children:Object(p.jsx)(g,{})})]},e.name)}))})})})]})}var N=c(51);function y(){return Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(p.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(p.jsx)("path",{d:"M0 0H16V16H0z",transform:"matrix(1 0 0 -1 0 16)"}),Object(p.jsx)("path",{fill:"#444",fillRule:"nonzero",d:"M7.631 1.333L6.368 0 0 6.667 6.368 13.333 7.631 12.001 3.428 7.6 13.333 7.601 13.333 5.743 3.418 5.742z",transform:"matrix(1 0 0 -1 0 16) translate(1.333 1.333)"})]})})}c(102),c(103);function L(e){var t=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},c=e?function(c){return t(e,c)}:function(e,c){return t(e,c)},n=function(e){return JSON.parse(localStorage.getItem(e))};return[e?n(e):function(e){return n(e)},c]}var k=c(19),w=(c(111),c(78)),S=c.n(w),I={result:null,filename:null,filetype:null,src:null,error:null},A=["Arial Black","Pacifico","Zilla Slab Highlight","Quicksand","VT323"],_=["00Brasil.png","01EUA.png","02Reino_Unido.png","03Alemanha.png","04Canad\xe1.png","50Gatinho.png","51C\xe3ozinho.png","52C\xe3es_Desconfiados.png"];function H(e){var t=e.canvas,c=e.visible,i=e.width,a=e.setFontSelectorVisible,s=Object(n.useRef)(),r=Object(n.useRef)();function o(e){var t=e.selected[0];"text"===t.type?(a(!0),setTimeout((function(){s.current.value=t.get("fontFamily"),r.current.value=t.get("fill")}),100)):a(!1)}return Object(n.useEffect)((function(){t&&(t.on("selection:created",o),t.on("selection:updated",o),t.on("selection:cleared",(function(){return a(!1)})))}),[t]),c?Object(p.jsxs)("div",{className:"font-selector",style:{width:i+"px"},children:[Object(p.jsx)("label",{children:"Estilo da letra: "}),Object(p.jsx)("select",{ref:s,onChange:function(e){var c;"Arial Black"!==e.target.value?(c=e.target.value,new S.a(c).load().then((function(){t.getActiveObject().set("fontFamily",c),t.requestRenderAll()})).catch((function(e){console.log(e),alert("erro ao carregar a fonte "+c)}))):(t.getActiveObject().set("fontFamily",e.target.value),t.requestRenderAll())},children:A.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))}),Object(p.jsx)("input",{ref:r,className:"input-color",type:"color",name:"color",value:"#000000",onChange:function(e){t.getActiveObject().set("fill",e.target.value),t.requestRenderAll()}})]}):Object(p.jsx)(p.Fragment,{})}var M=c(5),R=function(){return Object(p.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M22 20.7L3.3 2L2 3.3L3 4.3V19C3 20.1 3.9 21 5 21H19.7L20.7 22L22 20.7M5 19V6.3L12.6 13.9L11.1 15.8L9 13.1L6 17H15.7L17.7 19H5M8.8 5L6.8 3H19C20.1 3 21 3.9 21 5V17.2L19 15.2V5H8.8"})})},V=function(){return Object(p.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z"})})},B=function(){return Object(p.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})})},F=function(){return Object(p.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M5,3A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H14.09C14.03,20.67 14,20.34 14,20C14,19.32 14.12,18.64 14.35,18H5L8.5,13.5L11,16.5L14.5,12L16.73,14.97C17.7,14.34 18.84,14 20,14C20.34,14 20.67,14.03 21,14.09V5C21,3.89 20.1,3 19,3H5M19,16V19H16V21H19V24H21V21H24V19H21V16H19Z"})})},z=function(){return Object(p.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5M17,9.5C17,10.3 16.3,11 15.5,11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8C16.3,8 17,8.7 17,9.5M12,17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,17.23Z"})})},T=function(){return Object(p.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})})},q=function(){return Object(p.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"})})},E=function(){return Object(p.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M15.5,9C16.2,9 16.79,8.76 17.27,8.27C17.76,7.79 18,7.2 18,6.5C18,5.83 17.76,5.23 17.27,4.73C16.79,4.23 16.2,4 15.5,4C14.83,4 14.23,4.23 13.73,4.73C13.23,5.23 13,5.83 13,6.5C13,7.2 13.23,7.79 13.73,8.27C14.23,8.76 14.83,9 15.5,9M19.31,8.91L22.41,12L21,13.41L17.86,10.31C17.08,10.78 16.28,11 15.47,11C14.22,11 13.16,10.58 12.3,9.7C11.45,8.83 11,7.77 11,6.5C11,5.27 11.45,4.2 12.33,3.33C13.2,2.45 14.27,2 15.5,2C16.77,2 17.83,2.45 18.7,3.33C19.58,4.2 20,5.27 20,6.5C20,7.33 19.78,8.13 19.31,8.91M16.5,18H5.5L8.25,14.5L10.22,16.83L12.94,13.31L16.5,18M18,13L20,15V20C20,20.55 19.81,21 19.41,21.4C19,21.79 18.53,22 18,22H4C3.45,22 3,21.79 2.6,21.4C2.21,21 2,20.55 2,20V6C2,5.47 2.21,5 2.6,4.59C3,4.19 3.45,4 4,4H9.5C9.2,4.64 9.03,5.31 9,6H4V20H18V13Z"})})};function P(e){var t=e.canvas,c=e.imgProcs,i=e.setDrop,a=e.setShowCanvas,s=e.setDropping,r=e.setImgProcs,o=e.loadingImg,d=e.setLoadingImg,j=e.setModal,u=Object(n.useState)(),b=Object(l.a)(u,2),m=b[0],h=b[1],O=Object(n.useState)(),f=Object(l.a)(O,2),v=f[0],x=f[1],g=Object(n.useState)(),C=Object(l.a)(g,2),N=C[0],y=C[1],L=Object(n.useState)(),k=Object(l.a)(L,2),w=k[0],S=k[1];function A(e){switch(e.selected[0].type){case"text":h(!0);break;case"photo":x(!0);break;case"emoji":y(!0);break;case"repo":S(!0)}}return Object(n.useEffect)((function(){t&&(t.on("selection:created",A),t.on("selection:updated",A),t.on("selection:cleared",(function(){h(!1),x(!1),y(!1),S(!1)})))}),[t]),Object(p.jsxs)("div",{className:"palet",children:[Object(p.jsx)("button",{onClick:function(){return a(!1),s(!0),void i(I)},children:Object(p.jsx)(F,{})}),Object(p.jsx)("button",{onClick:function(){j({open:"repo",title:"Escolha o modelo para adicionar"})},children:Object(p.jsx)(E,{})}),Object(p.jsx)("button",{onClick:function(){return function(){var e=new fabric.Textbox("",{fontSize:26,fontFamily:"Arial Black",left:140,top:100,width:80,fill:"black"});e.type="text",e.enterEditing(),e.hiddenTextarea.focus(),t.setActiveObject(e),t.add(e)}()},children:Object(p.jsx)(V,{})}),Object(p.jsx)("button",{onClick:function(){j({open:"emoji",title:"Escolha o emoji para adicionar"})},children:Object(p.jsx)(z,{})}),v&&Object(p.jsx)("button",{onClick:function(){return function(){var e=t.getActiveObject();if(e&&!o){var n=c.findIndex((function(t){return t.obj===e}));if(-1!==n){var i=c[n];i.active=i.active===i.image_in?i.image_out:i.image_in,d(!0),fabric.Image.fromURL("https://imprima.app/"+i.active,(function(a){t.remove(e),a.top=i.obj.top,a.left=i.obj.left,a.scaleX=i.obj.scaleX,a.scaleY=i.obj.scaleY,a.type="photo",i.obj=a,t.add(a),t.setActiveObject(a),c.splice(n,1),r([i].concat(Object(M.a)(c))),d(!1)}))}}}()},children:Object(p.jsx)(R,{})}),(m||v||N||w)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{onClick:function(){t.remove(t.getActiveObject())},children:Object(p.jsx)(B,{})}),Object(p.jsx)("button",{onClick:function(){t.getActiveObject().sendToBack()},children:Object(p.jsx)(q,{})}),Object(p.jsx)("button",{onClick:function(){t.getActiveObject().bringToFront()},children:Object(p.jsx)(T,{})})]})]})}var D=c(79),U=c.n(D),W=c(80),Z=c.n(W);function J(e){var t=e.drop,c=e.dropping,i=e.onDrop,a=e.imgProcs,s=e.setDrop,r=e.setShowCanvas,o=e.setDropping,d=e.setImgProcs,j=e.setLoadingImg,u=e.canvasHeight,b=e.canvas,m=Object(n.useState)(!1),h=Object(l.a)(m,2),f=h[0],v=h[1];function g(){var e=t.filename,c=t.filetype,n=t.result;console.log("image",{filename:e,filetype:c,result:n}),v(!0);var i=function(e,t){for(var c=e.split(","),n=c[0].match(/:(.*?);/)[1],i=atob(c[1]),a=i.length,s=new Uint8Array(a);a--;)s[a]=i.charCodeAt(a);return new File([s],t,{type:n})}(n,"image.jpg");new U.a(i,{quality:.6,maxWidth:1e3,success:function(t){console.log("CompressorResult",t);var n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){var t=n.result;fetch(O,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:e,filetype:c,result:t})}).then((function(e){return e.json()})).then((function(e){v(!1),j(!0),fabric.Image.fromURL("https://imprima.app/"+e.image_out,(function(t){e.obj=t,e.active=e.image_out,t.scaleToWidth(180),t.type="photo",b.add(t),d([].concat(Object(M.a)(a),[e])),j(!1),o(!1),r(!0)}),{crossOrigin:"Anonymous"})})).catch((function(e){return v(!1)}))}},error:function(e){console.log(e.message),v(!1)}})}return Object(n.useEffect)((function(){if(c){var e=document.querySelector(".dropzone-instructions--main");if(e){e.innerText="Para enviar a imagem, clique ou arraste aqui.";var t=document.querySelectorAll(".dropzone-instructions--sub");t[0].innerText="Arquivos aceitos: .jpeg, .jpg, .png",t[1].innerText="Tamanho m\xe1ximo: 10MB"}}}),[c]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Z.a,{onChange:i,value:t,maxFileSize:10485760,canvasHeight:u+"px",cropperOptions:{guides:!0,viewMode:2,autoCropArea:1,movable:!1,zoomable:!1,dragMode:"none",rotatable:!1,scalable:!1,checkOrientation:!1}}),f&&Object(p.jsx)("div",{className:"loader-container",children:Object(p.jsx)(x,{})})||Object(p.jsxs)("div",{className:"btn-drop-container",children:[Object(p.jsx)("button",{className:"btn-drop",onClick:function(){return r(!0),o(!1),void s(I)},children:"\u2716 cancelar"}),t.filename&&Object(p.jsx)("button",{className:"btn-drop confirm",onClick:function(){return g()},children:"\u2714 enviar"})]})]})}var $;c(119),c(120);function X(e){var t=e.children,c=e.title,n=e.onClose,i=e.open,a=e.innerWidth;return i?Object(p.jsxs)("div",{className:"modal",children:[Object(p.jsx)("div",{className:"modal-overlay",style:{width:a+80}}),Object(p.jsxs)("div",{className:"modal-options",style:{width:a},children:[Object(p.jsxs)("div",{className:"motitle",children:[Object(p.jsx)("span",{className:"motext",children:c}),Object(p.jsx)("span",{className:"moclose",onClick:n,children:"\xd7"})]}),Object(p.jsx)("div",{className:"modal-container",children:t})]})]}):Object(p.jsx)(p.Fragment,{})}var Q=Object(n.forwardRef)((function(e,t){var c=e.type_id,i=e.xcanvas,a=e.setXCanvas,s=e.startImage,r=Object(n.useState)(I),o=Object(l.a)(r,2),d=o[0],j=o[1],u=Object(n.useState)(!0),b=Object(l.a)(u,2),m=b[0],h=b[1],O=Object(n.useState)([]),f=Object(l.a)(O,2),v=f[0],x=f[1],g=Object(n.useState)(),C=Object(l.a)(g,2),N=C[0],y=C[1],L=Object(n.useState)(!1),w=Object(l.a)(L,2),S=w[0],A=w[1],M=Object(n.useState)(!1),R=Object(l.a)(M,2),V=R[0],B=R[1],F=Object(n.useState)({}),z=Object(l.a)(F,2),T=z[0],q=z[1],E=window.innerWidth>505?506:window.innerWidth-32;Object(n.useEffect)((function(){var e;return e="https://imprima.app/img/default/".concat(c,".png"),k.fabric.Image.fromURL(e,(function(e){e.scaleToWidth(E),$.setBackgroundImage(e),$.renderAll()}),{crossOrigin:"Anonymous"}),$=new k.fabric.Canvas("fabric-area",{preserveObjectStacking:!0}),a($),function(){$.dispose()}}),[]),Object(n.useEffect)((function(){s&&k.fabric.Image.fromURL(s,(function(e){console.log("oImg",e,$),e.scaleToWidth(180),e.set("top",10),e.setCoords(),e.type="repo",$.add(e)}),{crossOrigin:"Anonymous"})}),[s]);var D=E/506*440;return Object(p.jsxs)("div",{className:"editor",children:[Object(p.jsx)("div",{style:{display:m?"flex":"none"},children:Object(p.jsxs)("div",{style:{display:"flex",width:E+16+"px"},children:[Object(p.jsx)("canvas",{ref:t,id:"fabric-area",width:E-26,height:D}),Object(p.jsx)(H,{canvas:i,visible:S,width:E-26,setFontSelectorVisible:A}),Object(p.jsx)(P,{canvas:i,imgProcs:v,setDrop:j,setShowCanvas:h,setDropping:y,setImgProcs:x,loadingImg:V,setLoadingImg:B,setModal:q})]})}),Object(p.jsx)(X,{title:T.title,open:"emoji"===T.open,innerWidth:E,onClose:function(){return q({})},children:Array(323).fill().map((function(e,t){return Object(p.jsx)("img",{className:"emoji",src:"https://imprima.app/img/emoji/".concat(t+111,".png"),onClick:function(){return e=t+111,k.fabric.Image.fromURL("https://imprima.app/img/emoji/".concat(e,".png"),(function(e){e.scaleToWidth(70),e.type="emoji",$.add(e)}),{crossOrigin:"Anonymous"}),void q({});var e}},t)}))}),Object(p.jsx)(X,{title:T.title,open:"repo"===T.open,innerWidth:E,onClose:function(){return q({})},children:_.map((function(e,t){return Object(p.jsx)("img",{className:"repo",src:"https://imprima.app/img/repo/".concat(e),onClick:function(){return t=e,k.fabric.Image.fromURL("https://imprima.app/img/repo/".concat(t),(function(e){e.scaleToWidth(120),e.type="repo",$.add(e)}),{crossOrigin:"Anonymous"}),void q({});var t}},t)}))}),N&&Object(p.jsx)(J,{canvas:i,drop:d,dropping:N,onDrop:function(e){j(e)},imgProcs:v,setDrop:j,setShowCanvas:h,setDropping:y,setImgProcs:x,loadingImg:V,setLoadingImg:B,canvasHeight:D})]})}));function Y(){var e=Object(o.g)().id,t=Object(n.useState)(!1),c=Object(l.a)(t,2),i=c[0],a=c[1],s=Object(n.useState)(),r=Object(l.a)(s,2),d=r[0],j=r[1],b=Object(o.f)(),m=Object(n.useRef)(),h=Object(n.useState)(),O=Object(l.a)(h,2),g=O[0],C=O[1],k=L("selected"),w=Object(l.a)(k,2)[1];return Object(n.useEffect)((function(){a(!0),fetch(u.replace("{id}",e)).then((function(e){return e.json()})).then((function(e){console.log("selected",e),a(!1),j(e)})).catch((function(e){return a(!1)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{stackclose:-2,children:Object(p.jsxs)("div",{className:"title",children:[Object(p.jsx)("div",{onClick:function(){return b.goBack()},children:Object(p.jsx)(y,{})}),Object(p.jsx)("div",{children:(null===d||void 0===d?void 0:d.name.split(" ")[0])+" personalizada"})]})}),Object(p.jsx)(v,{children:i&&Object(p.jsx)("div",{className:"loader-container",children:Object(p.jsx)(x,{size:"large"})})||Object(p.jsxs)("div",{className:"page-detail",children:[Object(p.jsx)("div",{className:"item",children:(null===d||void 0===d?void 0:d.type_id)&&Object(p.jsx)(Q,{ref:m,type_id:null===d||void 0===d?void 0:d.type_id,xcanvas:g,setXCanvas:C,startImage:null===d||void 0===d?void 0:d.url})}),Object(p.jsx)("div",{className:"instructions",children:"Voc\xea pode modificar a estampa como quiser, utilizando a barra de ferramentas ao lado."}),Object(p.jsx)("div",{className:"btn-next",children:Object(p.jsx)("button",{className:"next",onClick:function(){var e;null===g||void 0===g||g.discardActiveObject(),null===g||void 0===g||g.renderAll(),w(Object(N.a)(Object(N.a)({},d),{},{url:null===(e=m.current)||void 0===e?void 0:e.toDataURL({multiplier:3}),name:(null===d||void 0===d?void 0:d.name.split(" ")[0])+" personalizada"})),b.push("/alo/merchant")},children:"Continuar"})})]})})]})}c(121);function G(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)(null),s=Object(l.a)(a,2),r=s[0],d=s[1],j=Object(n.useRef)(),u=Object(o.f)(),m=L("selected"),h=Object(l.a)(m,1)[0];function O(){i(!0);var e=j.current.value;fetch(b.replace("{id}",h.type_id).replace("{cep}",e),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){i(!1),d(e.merchants),localStorage.setItem("address",JSON.stringify(e.address||"{}"))})).catch((function(e){return i(!1)}))}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("address"));(null===e||void 0===e?void 0:e.zip)&&(j.current.value=e.zip,O())}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{stackclose:-2,children:Object(p.jsxs)("div",{className:"title",children:[Object(p.jsx)("div",{onClick:function(){return u.goBack()},children:Object(p.jsx)(y,{})}),Object(p.jsx)("div",{children:"Selecione fornecedor"})]})}),Object(p.jsx)(v,{children:Object(p.jsx)("div",{className:"page-merchant",children:Object(p.jsxs)("div",{className:"stores",children:[Object(p.jsxs)("div",{className:"find",children:[Object(p.jsx)("input",{ref:j,onKeyUp:function(e){"Enter"===e.key&&O()},placeholder:"Digite seu CEP"}),Object(p.jsx)("button",{onClick:function(){return O()},children:c&&Object(p.jsx)(x,{})||"\ud83d\udd0d"})]}),Object(p.jsx)("div",{className:"list",children:r&&((null===r||void 0===r?void 0:r.length)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"item",children:[Object(p.jsx)("div",{className:"i1 b",children:"Fornecedor"}),Object(p.jsx)("div",{className:"i2 b",children:"Pre\xe7o"}),Object(p.jsx)("div",{className:"i3 b",children:"Frete"}),Object(p.jsx)("span",{className:"i5",children:"\xa0"})]}),r.map((function(e){return Object(p.jsxs)("div",{className:"item",children:[Object(p.jsxs)("div",{className:"i1",children:[e.name,Object(p.jsx)("br",{}),Object(p.jsxs)("span",{className:"small",children:[e.city," - ",e.uf]})]}),Object(p.jsxs)("div",{className:"i2",children:[Object(p.jsx)("div",{className:"small",children:"a partir de"}),"R$",e.price]}),Object(p.jsx)("div",{className:"i3 ".concat("gr\xe1tis"===e.delivery?"green":"red"),children:e.delivery}),Object(p.jsx)("span",{className:"i5",onClick:function(){return function(e){u.push("/alo/checkout/".concat(h.type_id,"/").concat(e.id))}(e)},children:Object(p.jsx)(g,{size:"small"})})]},e.id)}))]})||Object(p.jsx)("h3",{children:"Nenhum fornecedor na sua localidade."}))})]})})})]})}c(122);function K(){var e,t,c,i=Object(o.g)(),a=i.typeId,s=i.merchantId,r=Object(o.f)(),d=L("checkout"),j=Object(l.a)(d,2),u=(j[0],j[1]),b=Object(n.useState)(!1),h=Object(l.a)(b,2),O=h[0],g=h[1],C=L("selected"),N=Object(l.a)(C,2),k=N[0],w=(N[1],Object(n.useState)()),S=Object(l.a)(w,2),I=S[0],A=S[1],_=Object(n.useState)(),H=Object(l.a)(_,2),R=H[0],V=H[1],B=Object(n.useState)(),F=Object(l.a)(B,2),z=F[0],T=F[1],q=Object(n.useState)(),E=Object(l.a)(q,2),P=E[0],D=E[1],U=Object(n.useState)(),W=Object(l.a)(U,2),Z=W[0],J=W[1],$=Object(n.useState)(1),X=Object(l.a)($,2),Q=X[0],Y=(X[1],Object(n.useState)(0)),G=Object(l.a)(Y,2),K=G[0],te=G[1],ce=Object(n.useState)(),ne=Object(l.a)(ce,2),ie=ne[0],ae=ne[1],se=Object(n.useState)([]),re=Object(l.a)(se,2),oe=re[0],le=re[1];function de(e,t){te(t),ae(e*t)}function je(e,t){var c=oe[e].quantity+t,n=Object(M.a)(oe);0===c?n.splice(e,e+1):n[e].quantity=c,le(n)}return Object(n.useEffect)((function(){g(!0),fetch(m.replace("{typeId}",a).replace("{merchantId}",s),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){var t;T(e.attributes);var c=e.attributes.filter((function(e){return!e.price}));c=(null===(t=c)||void 0===t?void 0:t.length)?c:e.attributes,V(c),A(e.merchant),g(!1)})).catch((function(e){return g(!1)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{stackclose:-3,children:Object(p.jsxs)("div",{className:"title",children:[Object(p.jsx)("div",{onClick:function(){return r.goBack()},children:Object(p.jsx)(y,{})}),Object(p.jsx)("div",{children:null===I||void 0===I?void 0:I.name})]})}),Object(p.jsx)(v,{children:O&&Object(p.jsx)("div",{className:"loader-container",children:Object(p.jsx)(x,{size:"large"})})||Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"page-checkout",children:[Object(p.jsx)("h5",{children:null===k||void 0===k?void 0:k.name}),Object(p.jsxs)("div",{className:"first",children:[Object(p.jsx)("div",{className:"left-container",children:Object(p.jsx)("img",{src:null===k||void 0===k?void 0:k.url,alt:null===k||void 0===k?void 0:k.name})}),Object(p.jsxs)("div",{className:"right-container",children:[Object(p.jsxs)("div",{className:"attributes-container",children:[R&&R[0].name,Object(p.jsx)("div",{className:"options",children:null===R||void 0===R?void 0:R.map((function(e,t){return Object(p.jsx)("div",{className:"button-check ".concat(P===e.id&&"selected"),onClick:function(){D(e.id),e.price?J(e):J(null),de(Q,e.price)},children:e.value},t)}))})]}),P&&(null===z||void 0===z||null===(e=z.find((function(e){return e.merchant_type_attribute_id===P})))||void 0===e?void 0:e.name)&&Object(p.jsxs)("div",{className:"attributes-container",children:[null===z||void 0===z||null===(t=z.find((function(e){return e.merchant_type_attribute_id===P})))||void 0===t?void 0:t.name,Object(p.jsx)("div",{className:"options",children:null===(c=z.filter((function(e){return e.merchant_type_attribute_id===P})))||void 0===c?void 0:c.map((function(e,t){return Object(p.jsx)("div",{className:"button-check ".concat((null===Z||void 0===Z?void 0:Z.id)===e.id&&"selected"),onClick:function(){de(Q,e.price),J(e)},children:e.value},t)}))})]}),ie&&Object(p.jsxs)("div",{className:"price-container",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{children:"Pre\xe7o"}),Object(p.jsx)("div",{children:ie&&"R$".concat(ie)||Object(p.jsx)("small",{children:"selecione"})})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{className:"button-cart-add",onClick:function(){return function(){var e=null===z||void 0===z?void 0:z.find((function(e){return e.id===P})),t=null===z||void 0===z?void 0:z.find((function(e){return e.id===Z.id})),c="".concat(e.value===t.value?"":e.value+" ").concat(t.name," ").concat(t.value);oe.find((function(e){return e.detail===c}))?alert("J\xe1 adicionado."):le([].concat(Object(M.a)(oe),[{id:t.id,detail:c,price:K,quantity:Q}])),J(null),D(null),de(null)}()},children:Object(p.jsx)(ee,{})})})]})||""]})]}),Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"list",children:oe&&(null===oe||void 0===oe?void 0:oe.length)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"item",children:[Object(p.jsx)("div",{className:"i1 b",children:"Resumo"}),Object(p.jsx)("div",{className:"i2 b",children:"Pre\xe7o"}),Object(p.jsx)("div",{className:"i3 b",children:"Quantidade"})]}),Object(p.jsx)("div",{className:"items",children:oe.map((function(e,t){return Object(p.jsxs)("div",{className:"item",children:[Object(p.jsx)("div",{className:"i1",children:e.detail}),Object(p.jsxs)("div",{className:"i2",children:["R$",e.price]}),Object(p.jsxs)("div",{className:"i3",children:[Object(p.jsx)("input",{type:"button",value:"-",onClick:function(){return je(t,-1)}}),Object(p.jsx)("span",{children:e.quantity}),Object(p.jsx)("input",{type:"button",value:"+",onClick:function(){return je(t,1)}})]})]},t)}))}),Object(p.jsxs)("div",{className:"total",children:["Total: R$",oe.reduce((function(e,t){return e+t.price*t.quantity}),0)]})]})||""})}),Object(p.jsx)("div",{className:"next",children:Object(p.jsx)("button",{onClick:function(){oe.length?(u({merchant:I,cart:oe}),r.push("/alo/checkout-info")):alert("Escolha acima.")},children:"Continuar"})})]})})})]})}var ee=function(){return Object(p.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M9 20C9 21.11 8.11 22 7 22S5 21.11 5 20 5.9 18 7 18 9 18.9 9 20M17 18C15.9 18 15 18.9 15 20S15.9 22 17 22 19 21.11 19 20 18.11 18 17 18M7.17 14.75L7.2 14.63L8.1 13H15.55C16.3 13 16.96 12.59 17.3 11.97L21.16 4.96L19.42 4H19.41L18.31 6L15.55 11H8.53L8.4 10.73L6.16 6L5.21 4L4.27 2H1V4H3L6.6 11.59L5.25 14.04C5.09 14.32 5 14.65 5 15C5 16.11 5.9 17 7 17H19V15H7.42C7.29 15 7.17 14.89 7.17 14.75M18 2.76L16.59 1.34L11.75 6.18L9.16 3.59L7.75 5L11.75 9L18 2.76Z"})})},te=c(49),ce=c.n(te),ne=c(81),ie=c(9),ae=(c(124),c(20)),se=ae.a().shape({name:ae.b().required("Campo obrigat\xf3rio"),address:ae.b().required("Campo obrigat\xf3rio"),cellphone:ae.b().required("Campo obrigat\xf3rio"),note:ae.b()});function re(){var e=L("checkout"),t=Object(l.a)(e,1)[0],c=L("selected"),i=Object(l.a)(c,1)[0],a=Object(o.f)(),s=Object(n.useState)(),r=Object(l.a)(s,2),d=r[0],j=r[1],u=t.cart,b=t.merchant,m=Object(n.useState)(!1),O=Object(l.a)(m,2),g=O[0],C=O[1];function N(e){var t=e.name,c=e.cellphone,n=e.address,a=e.note;j(!0),fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:{merchant_id:null===b||void 0===b?void 0:b.id,name:t,cellphone:c,address:n,note:a,origin:localStorage.getItem("origin"),product_name:i.name,image:i.url,type_id:i.type_id},order_items:u})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.init_point&&(parent.location.href=e.init_point),j(!1)})).catch((function(e){alert("erro"),j(!1)}))}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{stackclose:-4,children:Object(p.jsxs)("div",{className:"title",children:[Object(p.jsx)("div",{onClick:function(){return a.goBack()},children:Object(p.jsx)(y,{})}),Object(p.jsx)("div",{children:"Resumo do pedido"})]})}),Object(p.jsx)(v,{children:Object(p.jsxs)("div",{className:"page-checkout-info",children:[Object(p.jsxs)("div",{className:"product-details",children:[Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["".concat(null===i||void 0===i?void 0:i.name),Object(p.jsxs)("div",{className:"link-detail",onClick:function(){return C(!g)},children:[g?"esconder":"ver"," detalhes"]})]}),g&&Object(p.jsxs)("div",{children:[u.map((function(e,t){return Object(p.jsx)("div",{style:{fontSize:"12px"},children:e.quantity+"x "+e.detail+" R$"+e.price},t)})),"Total: R$",u.reduce((function(e,t){return e+t.price*t.quantity}),0)]})||""]}),Object(p.jsx)("h5",{children:"Vendedor:"}),Object(p.jsxs)("div",{className:"seller",children:[null===b||void 0===b?void 0:b.name,Object(p.jsx)("br",{}),null===b||void 0===b?void 0:b.address,", ",null===b||void 0===b?void 0:b.address_extra," -"," ",null===b||void 0===b?void 0:b.neighborhood,", ",null===b||void 0===b?void 0:b.city,", ",null===b||void 0===b?void 0:b.uf]}),Object(p.jsx)(ie.d,{initialValues:{name:"",address:"",city:"",cellphone:""},onSubmit:function(){var e=Object(ne.a)(ce.a.mark((function e(t){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:N(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:se,children:Object(p.jsxs)(ie.c,{className:"buyer",children:[Object(p.jsx)("div",{children:"Complete seus dados"}),Object(p.jsx)(ie.b,{name:"name",placeholder:"Nome completo",type:"text"}),Object(p.jsx)(ie.a,{component:"span",name:"name"}),Object(p.jsx)(ie.b,{name:"address",placeholder:"Rua, bairro, n\xfamero, complemento, cidade",type:"text"}),Object(p.jsx)(ie.a,{component:"span",name:"address"}),Object(p.jsx)(ie.b,{name:"cellphone",placeholder:"Celular com DDD",type:"text"}),Object(p.jsx)(ie.a,{component:"span",name:"cellphone"}),Object(p.jsx)(ie.b,{name:"note",placeholder:"Informa\xe7\xf5es adicionais",type:"text"}),Object(p.jsx)(ie.a,{component:"span",name:"note"}),d&&Object(p.jsx)(x,{})||Object(p.jsx)("button",{type:"submit",children:"Pagar"})]})})]})})]})}var oe=function(){return Object(p.jsx)(r.a,{children:Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/alo/",exact:!0,children:Object(p.jsx)(C,{})}),Object(p.jsx)(o.a,{path:"/alo/produto/:id",children:Object(p.jsx)(Y,{})}),Object(p.jsx)(o.a,{path:"/alo/merchant",children:Object(p.jsx)(G,{})}),Object(p.jsx)(o.a,{path:"/alo/checkout/:typeId/:merchantId",children:Object(p.jsx)(K,{})}),Object(p.jsx)(o.a,{path:"/alo/checkout-info",children:Object(p.jsx)(re,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=new URLSearchParams(window.location.search);localStorage.setItem("kindId",le.get("kindId")||"1"),localStorage.setItem("imprimaId",le.get("imprimaId")||""),localStorage.setItem("origin",le.get("origin")||""),s.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(oe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},92:function(e,t,c){},93:function(e,t,c){},95:function(e,t,c){},96:function(e,t,c){},97:function(e,t,c){}},[[223,1,2]]]);
//# sourceMappingURL=main.b8958219.chunk.js.map