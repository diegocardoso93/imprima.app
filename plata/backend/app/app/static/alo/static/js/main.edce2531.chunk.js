(this.webpackJsonpwasp=this.webpackJsonpwasp||[]).push([[0],{102:function(e,t,n){},108:function(e,t){},109:function(e,t){},110:function(e,t){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},124:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),a=n(46),o=n.n(a),s=(n(92),n(87)),r=n(3),l=n(2),d="https://imprima.app/api",j="".concat(d,"/product/?kind_id={kindId}"),u="".concat(d,"/product/{id}"),b="".concat(d,"/merchant/?type_id={id}&cep={cep}"),h="".concat(d,"/category"),m="".concat(d,"/product/?category_id={categoryId}&type_id={typeId}"),O="".concat(d,"/merchant_type_attribute/?type_id={typeId}&merchant_id={merchantId}"),p="".concat(d,"/checkout/preference"),v="".concat(d,"/image"),f=(n(93),n(0));function x(e){var t=e.children,n=e.stackclose;return Object(f.jsxs)("div",{className:"header",children:[t,Object(f.jsx)("div",{className:"close",onClick:function(){history.go(n),parent.postMessage({active:!1},"*")},children:"\xd7"})]})}n(95);function g(e){var t=e.children;return Object(f.jsx)("div",{className:"body",children:t})}n(96);function C(e){var t=e.size;return Object(f.jsxs)("div",{className:"lds-ring ".concat(t),children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})}n(97);function N(e){var t=e.size;return Object(f.jsx)("svg",{width:"23",height:"39",viewBox:"0 0 23 39",style:{transform:"scale(".concat("small"===t?"1":"0.8",")"),fill:"#444"},children:Object(f.jsx)("path",{className:"slideshow-arrow",d:"M857.005,231.479L858.5,230l18.124,18-18.127,18-1.49-1.48L873.638,248Z",transform:"translate(-855 -230)"})})}function y(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(!1),o=Object(l.a)(a,2),s=o[0],d=o[1],u=Object(r.f)();Object(c.useEffect)((function(){var e=0;return window.onbeforeunload=function(t){0==e&&(b(),e=1)},window.onpopstate=function(e){b()},function(){window.onbeforeunload=function(){},window.onpopstate=function(){}}}),[]);var b=function(){parent.postMessage({active:!1},"*")};return Object(c.useEffect)((function(){d(!0),fetch(j.replace("{kindId}",localStorage.getItem("kindId")||"")).then((function(e){return e.json()})).then((function(e){i(e),d(!1)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(x,{stackclose:-1,children:Object(f.jsxs)("div",{className:"logo",children:[Object(f.jsx)("a",{href:"https://imprima.app",target:"_blank",rel:"noreferrer",className:"logo-link",children:Object(f.jsx)("div",{className:"inner",children:Object(f.jsx)("img",{src:"https://imprima.app/img/logo_100.png",alt:""})})}),Object(f.jsx)("h1",{children:"Comprar personalizado"})]})}),Object(f.jsx)(g,{children:s&&Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)(C,{size:"large"})})||Object(f.jsx)("div",{className:"page-items",children:Object(f.jsx)("div",{className:"options",children:n.map((function(e){return Object(f.jsxs)("div",{className:"option",onClick:function(){return function(e){u.push("/alo/produto/".concat(e.id).concat(location.search))}(e)},children:[Object(f.jsxs)("div",{className:"left",children:[Object(f.jsx)("img",{src:e.thumb_url,alt:"",className:"image"}),Object(f.jsx)("span",{children:e.name})]}),Object(f.jsx)("span",{className:"select",children:Object(f.jsx)(N,{})})]},e.name)}))})})})]})}var w=n(51);function k(){return Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(f.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(f.jsx)("path",{d:"M0 0H16V16H0z",transform:"matrix(1 0 0 -1 0 16)"}),Object(f.jsx)("path",{fill:"#444",fillRule:"nonzero",d:"M7.631 1.333L6.368 0 0 6.667 6.368 13.333 7.631 12.001 3.428 7.6 13.333 7.601 13.333 5.743 3.418 5.742z",transform:"matrix(1 0 0 -1 0 16) translate(1.333 1.333)"})]})})}n(102),n(103);function L(e){var t=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},n=e?function(n){return t(e,n)}:function(e,n){return t(e,n)},c=function(e){return JSON.parse(localStorage.getItem(e))};return[e?c(e):function(e){return c(e)},n]}var S=n(25),I=(n(111),n(78)),A=n.n(I),_={result:null,filename:null,filetype:null,src:null,error:null},M=["Arial Black","Pacifico","Zilla Slab Highlight","Quicksand","VT323"],H=["00Brasil.png","01EUA.png","02Reino_Unido.png","03Alemanha.png","04Canad\xe1.png","50Gatinho.png","51C\xe3ozinho.png","52C\xe3es_Desconfiados.png"];function R(e){var t=e.canvas,n=e.visible,i=e.width,a=e.setFontSelectorVisible,o=Object(c.useRef)(),s=Object(c.useRef)();function r(e){var t=e.selected[0];"text"===t.type?(a(!0),setTimeout((function(){o.current.value=t.get("fontFamily"),s.current.value=t.get("fill")}),100)):a(!1)}return Object(c.useEffect)((function(){t&&(t.on("selection:created",r),t.on("selection:updated",r),t.on("selection:cleared",(function(){return a(!1)})))}),[t]),n?Object(f.jsxs)("div",{className:"font-selector",style:{width:i+"px"},children:[Object(f.jsx)("label",{children:"Estilo da letra: "}),Object(f.jsx)("select",{ref:o,onChange:function(e){var n;"Arial Black"!==e.target.value?(n=e.target.value,new A.a(n).load().then((function(){t.getActiveObject().set("fontFamily",n),t.requestRenderAll()})).catch((function(e){console.log(e),alert("erro ao carregar a fonte "+n)}))):(t.getActiveObject().set("fontFamily",e.target.value),t.requestRenderAll())},children:M.map((function(e){return Object(f.jsx)("option",{value:e,children:e},e)}))}),Object(f.jsx)("input",{ref:s,className:"input-color",type:"color",name:"color",value:"#000000",onChange:function(e){t.getActiveObject().set("fill",e.target.value),t.requestRenderAll()}})]}):Object(f.jsx)(f.Fragment,{})}var V=n(5),B=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M22 20.7L3.3 2L2 3.3L3 4.3V19C3 20.1 3.9 21 5 21H19.7L20.7 22L22 20.7M5 19V6.3L12.6 13.9L11.1 15.8L9 13.1L6 17H15.7L17.7 19H5M8.8 5L6.8 3H19C20.1 3 21 3.9 21 5V17.2L19 15.2V5H8.8"})})},F=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z"})})},z=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})})},P=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M5,3A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H14.09C14.03,20.67 14,20.34 14,20C14,19.32 14.12,18.64 14.35,18H5L8.5,13.5L11,16.5L14.5,12L16.73,14.97C17.7,14.34 18.84,14 20,14C20.34,14 20.67,14.03 21,14.09V5C21,3.89 20.1,3 19,3H5M19,16V19H16V21H19V24H21V21H24V19H21V16H19Z"})})},T=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5M17,9.5C17,10.3 16.3,11 15.5,11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8C16.3,8 17,8.7 17,9.5M12,17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,17.23Z"})})},q=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})})},D=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"})})},E=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M15.5,9C16.2,9 16.79,8.76 17.27,8.27C17.76,7.79 18,7.2 18,6.5C18,5.83 17.76,5.23 17.27,4.73C16.79,4.23 16.2,4 15.5,4C14.83,4 14.23,4.23 13.73,4.73C13.23,5.23 13,5.83 13,6.5C13,7.2 13.23,7.79 13.73,8.27C14.23,8.76 14.83,9 15.5,9M19.31,8.91L22.41,12L21,13.41L17.86,10.31C17.08,10.78 16.28,11 15.47,11C14.22,11 13.16,10.58 12.3,9.7C11.45,8.83 11,7.77 11,6.5C11,5.27 11.45,4.2 12.33,3.33C13.2,2.45 14.27,2 15.5,2C16.77,2 17.83,2.45 18.7,3.33C19.58,4.2 20,5.27 20,6.5C20,7.33 19.78,8.13 19.31,8.91M16.5,18H5.5L8.25,14.5L10.22,16.83L12.94,13.31L16.5,18M18,13L20,15V20C20,20.55 19.81,21 19.41,21.4C19,21.79 18.53,22 18,22H4C3.45,22 3,21.79 2.6,21.4C2.21,21 2,20.55 2,20V6C2,5.47 2.21,5 2.6,4.59C3,4.19 3.45,4 4,4H9.5C9.2,4.64 9.03,5.31 9,6H4V20H18V13Z"})})};function U(e){var t=e.canvas,n=e.imgProcs,i=e.setDrop,a=e.setShowCanvas,o=e.setDropping,s=e.setImgProcs,r=e.loadingImg,d=e.setLoadingImg,j=e.setModal,u=Object(c.useState)(),b=Object(l.a)(u,2),h=b[0],m=b[1],O=Object(c.useState)(),p=Object(l.a)(O,2),v=p[0],x=p[1],g=Object(c.useState)(),C=Object(l.a)(g,2),N=C[0],y=C[1],w=Object(c.useState)(),k=Object(l.a)(w,2),L=k[0],S=k[1];function I(e){switch(e.selected[0].type){case"text":m(!0);break;case"photo":x(!0);break;case"emoji":y(!0);break;case"repo":S(!0)}}return Object(c.useEffect)((function(){t&&(t.on("selection:created",I),t.on("selection:updated",I),t.on("selection:cleared",(function(){m(!1),x(!1),y(!1),S(!1)})))}),[t]),Object(f.jsxs)("div",{className:"palet",children:[Object(f.jsx)("button",{onClick:function(){return a(!1),o(!0),void i(_)},children:Object(f.jsx)(P,{})}),Object(f.jsx)("button",{onClick:function(){j({open:"repo",title:"Escolha o modelo para adicionar"})},children:Object(f.jsx)(E,{})}),Object(f.jsx)("button",{onClick:function(){return function(){var e=new fabric.Textbox("",{fontSize:26,fontFamily:"Arial Black",left:140,top:100,width:80,fill:"black"});e.type="text",e.enterEditing(),e.hiddenTextarea.focus(),t.setActiveObject(e),t.add(e)}()},children:Object(f.jsx)(F,{})}),Object(f.jsx)("button",{onClick:function(){j({open:"emoji",title:"Escolha o emoji para adicionar"})},children:Object(f.jsx)(T,{})}),v&&Object(f.jsx)("button",{onClick:function(){return function(){var e=t.getActiveObject();if(e&&!r){var c=n.findIndex((function(t){return t.obj===e}));if(-1!==c){var i=n[c];i.active=i.active===i.image_in?i.image_out:i.image_in,d(!0),fabric.Image.fromURL("https://imprima.app/"+i.active,(function(a){t.remove(e),a.top=i.obj.top,a.left=i.obj.left,a.scaleX=i.obj.scaleX,a.scaleY=i.obj.scaleY,a.type="photo",i.obj=a,t.add(a),t.setActiveObject(a),n.splice(c,1),s([i].concat(Object(V.a)(n))),d(!1)}))}}}()},children:Object(f.jsx)(B,{})}),(h||v||N||L)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){t.remove(t.getActiveObject())},children:Object(f.jsx)(z,{})}),Object(f.jsx)("button",{onClick:function(){t.getActiveObject().sendToBack()},children:Object(f.jsx)(D,{})}),Object(f.jsx)("button",{onClick:function(){t.getActiveObject().bringToFront()},children:Object(f.jsx)(q,{})})]})]})}var W=n(79),Z=n.n(W),J=n(80),X=n.n(J);function $(e){var t=e.drop,n=e.dropping,i=e.onDrop,a=e.imgProcs,o=e.setDrop,s=e.setShowCanvas,r=e.setDropping,d=e.setImgProcs,j=e.setLoadingImg,u=e.canvasHeight,b=e.canvas,h=Object(c.useState)(!1),m=Object(l.a)(h,2),O=m[0],p=m[1];function x(){var e=t.filename,n=t.filetype,c=t.result;console.log("image",{filename:e,filetype:n,result:c}),p(!0);var i=function(e,t){for(var n=e.split(","),c=n[0].match(/:(.*?);/)[1],i=atob(n[1]),a=i.length,o=new Uint8Array(a);a--;)o[a]=i.charCodeAt(a);return new File([o],t,{type:c})}(c,"image.jpg");new Z.a(i,{quality:.6,maxWidth:1e3,success:function(t){console.log("CompressorResult",t);var c=new FileReader;c.readAsDataURL(t),c.onloadend=function(){var t=c.result;fetch(v,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:e,filetype:n,result:t})}).then((function(e){return e.json()})).then((function(e){p(!1),j(!0),fabric.Image.fromURL("https://imprima.app/"+e.image_out,(function(t){e.obj=t,e.active=e.image_out,t.scaleToWidth(180),t.type="photo",b.add(t),d([].concat(Object(V.a)(a),[e])),j(!1),r(!1),s(!0)}),{crossOrigin:"Anonymous"})})).catch((function(e){return p(!1)}))}},error:function(e){console.log(e.message),p(!1)}})}return Object(c.useEffect)((function(){if(n){var e=document.querySelector(".dropzone-instructions--main");if(e){e.innerText="Para enviar a imagem, clique ou arraste aqui.";var t=document.querySelectorAll(".dropzone-instructions--sub");t[0].innerText="Arquivos aceitos: .jpeg, .jpg, .png",t[1].innerText="Tamanho m\xe1ximo: 10MB"}}}),[n]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(X.a,{onChange:i,value:t,maxFileSize:10485760,canvasHeight:u+"px",cropperOptions:{guides:!0,viewMode:2,autoCropArea:1,movable:!1,zoomable:!1,dragMode:"none",rotatable:!1,scalable:!1,checkOrientation:!1}}),O&&Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)(C,{})})||Object(f.jsxs)("div",{className:"btn-drop-container",children:[Object(f.jsx)("button",{className:"btn-drop",onClick:function(){return s(!0),r(!1),void o(_)},children:"\u2716 cancelar"}),t.filename&&Object(f.jsx)("button",{className:"btn-drop confirm",onClick:function(){return x()},children:"\u2714 enviar"})]})]})}var Q;n(119),n(120);function Y(e){var t=e.children,n=e.title,c=e.onClose,i=e.open,a=e.innerWidth;return i?Object(f.jsxs)("div",{className:"modal",children:[Object(f.jsx)("div",{className:"modal-overlay",style:{width:a+80}}),Object(f.jsxs)("div",{className:"modal-options",style:{width:a},children:[Object(f.jsxs)("div",{className:"motitle",children:[Object(f.jsx)("span",{className:"motext",children:n}),Object(f.jsx)("span",{className:"moclose",onClick:c,children:"\xd7"})]}),Object(f.jsx)("div",{className:"modal-container",children:t})]})]}):Object(f.jsx)(f.Fragment,{})}var G=Object(c.forwardRef)((function(e,t){var n=e.type_id,i=e.xcanvas,a=e.setXCanvas,o=Object(c.useState)(_),s=Object(l.a)(o,2),r=s[0],d=s[1],j=Object(c.useState)(!0),u=Object(l.a)(j,2),b=u[0],h=u[1],m=Object(c.useState)([]),O=Object(l.a)(m,2),p=O[0],v=O[1],x=Object(c.useState)(),g=Object(l.a)(x,2),C=g[0],N=g[1],y=Object(c.useState)(!1),w=Object(l.a)(y,2),k=w[0],L=w[1],I=Object(c.useState)(!1),A=Object(l.a)(I,2),M=A[0],V=A[1],B=Object(c.useState)({}),F=Object(l.a)(B,2),z=F[0],P=F[1],T=window.innerWidth>505?506:window.innerWidth-32;Object(c.useEffect)((function(){var e;return e="https://imprima.app/img/default/".concat(n,".png"),S.fabric.Image.fromURL(e,(function(e){e.scaleToWidth(T),Q.setBackgroundImage(e),Q.renderAll()}),{crossOrigin:"Anonymous"}),Q=new S.fabric.Canvas("fabric-area",{preserveObjectStacking:!0}),a(Q),function(){Q.dispose()}}),[]);var q=T/506*440;return Object(f.jsxs)("div",{className:"editor",children:[Object(f.jsx)("div",{style:{display:b?"flex":"none"},children:Object(f.jsxs)("div",{style:{display:"flex",width:T+16+"px"},children:[Object(f.jsx)("canvas",{ref:t,id:"fabric-area",width:T-26,height:q}),Object(f.jsx)(R,{canvas:i,visible:k,width:T-26,setFontSelectorVisible:L}),Object(f.jsx)(U,{canvas:i,imgProcs:p,setDrop:d,setShowCanvas:h,setDropping:N,setImgProcs:v,loadingImg:M,setLoadingImg:V,setModal:P})]})}),Object(f.jsx)(Y,{title:z.title,open:"emoji"===z.open,innerWidth:T,onClose:function(){return P({})},children:Array(323).fill().map((function(e,t){return Object(f.jsx)("img",{className:"emoji",src:"https://imprima.app/img/emoji/".concat(t+111,".png"),onClick:function(){return e=t+111,S.fabric.Image.fromURL("https://imprima.app/img/emoji/".concat(e,".png"),(function(e){e.scaleToWidth(70),e.type="emoji",Q.add(e)}),{crossOrigin:"Anonymous"}),void P({});var e}},t)}))}),Object(f.jsx)(Y,{title:z.title,open:"repo"===z.open,innerWidth:T,onClose:function(){return P({})},children:H.map((function(e,t){return Object(f.jsx)("img",{className:"repo",src:"https://imprima.app/img/repo/".concat(e),onClick:function(){return t=e,S.fabric.Image.fromURL("https://imprima.app/img/repo/".concat(t),(function(e){e.scaleToWidth(70),e.type="repo",Q.add(e)}),{crossOrigin:"Anonymous"}),void P({});var t}},t)}))}),C&&Object(f.jsx)($,{canvas:i,drop:r,dropping:C,onDrop:function(e){d(e)},imgProcs:p,setDrop:d,setShowCanvas:h,setDropping:N,setImgProcs:v,loadingImg:M,setLoadingImg:V,canvasHeight:q})]})}));function K(){var e=Object(r.g)().id,t=Object(c.useState)(!1),n=Object(l.a)(t,2),i=n[0],a=n[1],o=Object(c.useState)(null),s=Object(l.a)(o,2),d=s[0],j=s[1],b=Object(c.useState)(null),O=Object(l.a)(b,2),p=O[0],v=O[1],N=Object(c.useState)({loading:!1,show:!1}),y=Object(l.a)(N,2),S=y[0],I=y[1],A=Object(c.useState)(),_=Object(l.a)(A,2),M=_[0],H=_[1],R=Object(c.useState)(!1),V=Object(l.a)(R,2),B=V[0],F=V[1],z=Object(r.f)(),P=Object(c.useRef)(),T=Object(c.useState)(),q=Object(l.a)(T,2),D=q[0],E=q[1],U=Object(c.useState)(!1),W=Object(l.a)(U,2),Z=W[0],J=W[1],X=L("selected"),$=Object(l.a)(X,2)[1];return Object(c.useEffect)((function(){a(!0),fetch(u.replace("{id}",e)).then((function(e){return e.json()})).then((function(e){console.log("selected",e),a(!1),H(e)})).catch((function(e){return a(!1)})),I({loading:!0,show:!0}),fetch(h,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){I({loading:!1,show:!0}),j(e)})).catch((function(e){return I({loading:!1,show:!1})}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(x,{stackclose:-2,children:Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("div",{onClick:function(){return z.goBack()},children:Object(f.jsx)(k,{})}),Object(f.jsx)("div",{children:Z?(null===M||void 0===M?void 0:M.name.split(" ")[0])+" personalizada":null===M||void 0===M?void 0:M.name})]})}),Object(f.jsx)(g,{children:i&&Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)(C,{size:"large"})})||Object(f.jsxs)("div",{className:"page-detail",children:[Object(f.jsx)("div",{className:"item",children:Z&&Object(f.jsx)(G,{ref:P,type_id:null===M||void 0===M?void 0:M.type_id,xcanvas:D,setXCanvas:E})||Object(f.jsx)("img",{src:null===M||void 0===M?void 0:M.url,alt:null===M||void 0===M?void 0:M.name})}),Object(f.jsxs)("div",{className:"hcategory",children:[Object(f.jsx)("div",{className:"switch-container",children:"trocar estampa:"}),Object(f.jsx)("div",{className:"category-container",children:S.show&&(S.loading&&Object(f.jsx)(C,{})||Object(f.jsxs)("select",{onChange:function(e){var t=e.target.value;if(v([]),"selecione"!==t){if("enviar"===t)return J(!0),void I({loading:!1,show:!0});J(!1),F(!0),fetch(m.replace("{categoryId}",t).replace("{typeId}",M.type_id),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){v(e),F(!1)})).catch((function(e){return F(!1)}))}},children:[Object(f.jsx)("option",{value:"selecione",children:"selecione"}),Object(f.jsx)("option",{value:"enviar",children:"Personalizada"}),null===d||void 0===d?void 0:d.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))]}))})]}),Object(f.jsx)("div",{className:"image-list",children:S.show&&(B&&Object(f.jsx)(C,{})||p&&(null===p||void 0===p?void 0:p.map((function(e){return Object(f.jsx)("img",{src:e.thumb_url,onClick:function(){H(e)}},e.id)}))))}),Object(f.jsx)("div",{className:"btn-next",children:Object(f.jsx)("button",{className:"next",onClick:function(){var e;null===D||void 0===D||D.discardActiveObject(),null===D||void 0===D||D.renderAll(),$(Object(w.a)(Object(w.a)({},M),{},{url:Z?null===(e=P.current)||void 0===e?void 0:e.toDataURL({multiplier:3}):null===M||void 0===M?void 0:M.url,name:Z?(null===M||void 0===M?void 0:M.name.split(" ")[0])+" personalizada":null===M||void 0===M?void 0:M.name})),z.push("/alo/merchant")},children:"Continuar"})})]})})]})}n(121);function ee(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(null),o=Object(l.a)(a,2),s=o[0],d=o[1],j=Object(c.useRef)(),u=Object(r.f)(),h=L("selected"),m=Object(l.a)(h,1)[0];function O(){i(!0);var e=j.current.value;fetch(b.replace("{id}",m.type_id).replace("{cep}",e),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){i(!1),d(e.merchants),localStorage.setItem("address",JSON.stringify(e.address||"{}"))})).catch((function(e){return i(!1)}))}return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("address"));(null===e||void 0===e?void 0:e.zip)&&(j.current.value=e.zip,O())}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(x,{stackclose:-2,children:Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("div",{onClick:function(){return u.goBack()},children:Object(f.jsx)(k,{})}),Object(f.jsx)("div",{children:"Selecionar fornecedor"})]})}),Object(f.jsx)(g,{children:Object(f.jsx)("div",{className:"page-merchant",children:Object(f.jsxs)("div",{className:"stores",children:[Object(f.jsxs)("div",{className:"find",children:[Object(f.jsx)("input",{ref:j,onKeyUp:function(e){"Enter"===e.key&&O()},placeholder:"Digite seu CEP"}),Object(f.jsx)("button",{onClick:function(){return O()},children:n&&Object(f.jsx)(C,{})||"\ud83d\udd0d"})]}),Object(f.jsx)("div",{className:"list",children:s&&((null===s||void 0===s?void 0:s.length)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"item",children:[Object(f.jsx)("div",{className:"i1 b",children:"Fornecedor"}),Object(f.jsx)("div",{className:"i2 b",children:"Pre\xe7o"}),Object(f.jsx)("div",{className:"i3 b",children:"Frete"}),Object(f.jsx)("span",{className:"i5",children:"\xa0"})]}),s.map((function(e){return Object(f.jsxs)("div",{className:"item",children:[Object(f.jsxs)("div",{className:"i1",children:[e.name,Object(f.jsx)("br",{}),Object(f.jsxs)("span",{className:"small",children:[e.city," - ",e.uf]})]}),Object(f.jsxs)("div",{className:"i2",children:[Object(f.jsx)("div",{className:"small",children:"a partir de"}),"R$",e.price]}),Object(f.jsx)("div",{className:"i3 ".concat("gr\xe1tis"===e.delivery?"green":"red"),children:e.delivery}),Object(f.jsx)("span",{className:"i5",onClick:function(){return function(e){u.push("/alo/checkout/".concat(m.type_id,"/").concat(e.id))}(e)},children:Object(f.jsx)(N,{size:"small"})})]},e.id)}))]})||Object(f.jsx)("h3",{children:"Nenhum fornecedor na sua localidade."}))})]})})})]})}n(122);function te(){var e,t,n,i=Object(r.g)(),a=i.typeId,o=i.merchantId,s=Object(r.f)(),d=L("checkout"),j=Object(l.a)(d,2),u=(j[0],j[1]),b=Object(c.useState)(!1),h=Object(l.a)(b,2),m=h[0],p=h[1],v=L("selected"),N=Object(l.a)(v,2),y=N[0],w=(N[1],Object(c.useState)()),S=Object(l.a)(w,2),I=S[0],A=S[1],_=Object(c.useState)(),M=Object(l.a)(_,2),H=M[0],R=M[1],V=Object(c.useState)(),B=Object(l.a)(V,2),F=B[0],z=B[1],P=Object(c.useState)(),T=Object(l.a)(P,2),q=T[0],D=T[1],E=Object(c.useState)(),U=Object(l.a)(E,2),W=U[0],Z=U[1],J=Object(c.useState)(1),X=Object(l.a)(J,2),$=X[0],Q=X[1],Y=Object(c.useState)(0),G=Object(l.a)(Y,2),K=G[0],ee=G[1],te=Object(c.useState)(),ne=Object(l.a)(te,2),ce=ne[0],ie=ne[1];function ae(e,t){ee(t),ie(e*t)}return Object(c.useEffect)((function(){p(!0),fetch(O.replace("{typeId}",a).replace("{merchantId}",o),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){var t;z(e.attributes);var n=e.attributes.filter((function(e){return!e.price}));n=(null===(t=n)||void 0===t?void 0:t.length)?n:e.attributes,R(n),A(e.merchant),p(!1)})).catch((function(e){return p(!1)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(x,{stackclose:-3,children:Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("div",{onClick:function(){return s.goBack()},children:Object(f.jsx)(k,{})}),Object(f.jsx)("div",{children:null===I||void 0===I?void 0:I.name})]})}),Object(f.jsx)(g,{children:m&&Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)(C,{size:"large"})})||Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"page-checkout",children:[Object(f.jsx)("h5",{children:null===y||void 0===y?void 0:y.name}),Object(f.jsxs)("div",{className:"first",children:[Object(f.jsx)("div",{className:"left-container",children:Object(f.jsx)("img",{src:null===y||void 0===y?void 0:y.url,alt:null===y||void 0===y?void 0:y.name})}),Object(f.jsxs)("div",{className:"right-container",children:[Object(f.jsxs)("div",{className:"attributes-container",children:[H&&H[0].name,Object(f.jsx)("div",{className:"options",children:null===H||void 0===H?void 0:H.map((function(e,t){return Object(f.jsx)("div",{className:"button-check ".concat(q===e.id&&"selected"),onClick:function(){D(e.id),e.price?Z(e):Z(null),ae($,e.price)},children:e.value},t)}))})]}),q&&(null===F||void 0===F||null===(e=F.find((function(e){return e.merchant_type_attribute_id===q})))||void 0===e?void 0:e.name)&&Object(f.jsxs)("div",{className:"attributes-container",children:[null===F||void 0===F||null===(t=F.find((function(e){return e.merchant_type_attribute_id===q})))||void 0===t?void 0:t.name,Object(f.jsx)("div",{className:"options",children:null===(n=F.filter((function(e){return e.merchant_type_attribute_id===q})))||void 0===n?void 0:n.map((function(e,t){return Object(f.jsx)("div",{className:"button-check ".concat((null===W||void 0===W?void 0:W.id)===e.id&&"selected"),onClick:function(){ae($,e.price),Z(e)},children:e.value},t)}))})]}),Object(f.jsxs)("div",{className:"quantity-container",children:[Object(f.jsx)("span",{children:"Quantidade"}),Object(f.jsx)("input",{type:"number",value:$,onChange:function(e){ae(e.target.value,K),Q(e.target.value)}})]}),Object(f.jsxs)("div",{className:"price-container",children:[Object(f.jsx)("span",{children:"Pre\xe7o final"}),Object(f.jsx)("div",{children:ce&&"R$".concat(ce)||"selecione"})]})]})]}),Object(f.jsx)("div",{className:"next",children:Object(f.jsx)("button",{onClick:function(){K?(u({attribute:W,merchant:I,quantity:$}),s.push("/alo/checkout-info")):alert("escolha o tamanho e a quantidade")},children:"Continuar"})})]})})})]})}var ne=n(49),ce=n.n(ne),ie=n(81),ae=n(9),oe=(n(124),n(19)),se=oe.a().shape({name:oe.b().required("Campo obrigat\xf3rio"),address:oe.b().required("Campo obrigat\xf3rio"),cellphone:oe.b().required("Campo obrigat\xf3rio"),note:oe.b()});function re(){var e=L("checkout"),t=Object(l.a)(e,1)[0],n=L("selected"),i=Object(l.a)(n,1)[0],a=Object(r.f)(),o=Object(c.useState)(),s=Object(l.a)(o,2),d=s[0],j=s[1],u=t.attribute,b=t.merchant,h=t.quantity;function m(e){var t=e.name,n=e.cellphone,c=e.address,a=e.note;j(!0),fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:{merchant_id:null===b||void 0===b?void 0:b.id,name:t,cellphone:n,address:c,note:a,origin:localStorage.getItem("origin")},orderItem:{selected:i,merchant_type_attribute_id:null===u||void 0===u?void 0:u.id,name:O(),description:v(),quantity:h}})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.init_point&&(parent.location.href=e.init_point),j(!1)})).catch((function(e){alert("erro"),j(!1)}))}function O(){return"".concat(h,"x ").concat(null===i||void 0===i?void 0:i.name)}function v(){return"".concat(null===u||void 0===u?void 0:u.name," ").concat(null===u||void 0===u?void 0:u.value," - R$").concat(h*(null===u||void 0===u?void 0:u.price))}return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(x,{stackclose:-4,children:Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("div",{onClick:function(){return a.goBack()},children:Object(f.jsx)(k,{})}),Object(f.jsx)("div",{children:"Resumo do pedido"})]})}),Object(f.jsx)(g,{children:Object(f.jsxs)("div",{className:"page-checkout-info",children:[Object(f.jsxs)("div",{className:"product-details",children:[O(),Object(f.jsx)("br",{}),v()]}),Object(f.jsx)("h5",{children:"Vendedor:"}),Object(f.jsxs)("div",{className:"seller",children:[null===b||void 0===b?void 0:b.name,Object(f.jsx)("br",{}),null===b||void 0===b?void 0:b.address,", ",null===b||void 0===b?void 0:b.address_extra," -"," ",null===b||void 0===b?void 0:b.neighborhood,", ",null===b||void 0===b?void 0:b.city,", ",null===b||void 0===b?void 0:b.uf]}),Object(f.jsx)(ae.d,{initialValues:{name:"",address:"",city:"",cellphone:""},onSubmit:function(){var e=Object(ie.a)(ce.a.mark((function e(t){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:m(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:se,children:Object(f.jsxs)(ae.c,{className:"buyer",children:[Object(f.jsx)("div",{children:"Complete seus dados"}),Object(f.jsx)(ae.b,{name:"name",placeholder:"Nome completo",type:"text"}),Object(f.jsx)(ae.a,{component:"span",name:"name"}),Object(f.jsx)(ae.b,{name:"address",placeholder:"Rua, bairro, n\xfamero, complemento, cidade",type:"text"}),Object(f.jsx)(ae.a,{component:"span",name:"address"}),Object(f.jsx)(ae.b,{name:"cellphone",placeholder:"Celular com DDD",type:"text"}),Object(f.jsx)(ae.a,{component:"span",name:"cellphone"}),Object(f.jsx)(ae.b,{name:"note",placeholder:"Observa\xe7\xe3o, exemplo: fazer a estampa menor, etc",type:"text"}),Object(f.jsx)(ae.a,{component:"span",name:"note"}),d&&Object(f.jsx)(C,{})||Object(f.jsx)("button",{type:"submit",children:"Pagar"})]})})]})})]})}var le=function(){return Object(f.jsx)(s.a,{children:Object(f.jsxs)(r.c,{children:[Object(f.jsx)(r.a,{path:"/alo/",exact:!0,children:Object(f.jsx)(y,{})}),Object(f.jsx)(r.a,{path:"/alo/produto/:id",children:Object(f.jsx)(K,{})}),Object(f.jsx)(r.a,{path:"/alo/merchant",children:Object(f.jsx)(ee,{})}),Object(f.jsx)(r.a,{path:"/alo/checkout/:typeId/:merchantId",children:Object(f.jsx)(te,{})}),Object(f.jsx)(r.a,{path:"/alo/checkout-info",children:Object(f.jsx)(re,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=new URLSearchParams(window.location.search);localStorage.setItem("kindId",de.get("kindId")||"2"),localStorage.setItem("imprimaId",de.get("imprimaId")||""),localStorage.setItem("origin",de.get("origin")||""),o.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(le,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},92:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){}},[[223,1,2]]]);
//# sourceMappingURL=main.edce2531.chunk.js.map