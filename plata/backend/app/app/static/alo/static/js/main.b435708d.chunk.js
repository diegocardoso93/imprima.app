(this.webpackJsonpwasp=this.webpackJsonpwasp||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},106:function(e,t,n){},112:function(e,t){},113:function(e,t){},114:function(e,t){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},131:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),a=n(19),s=n.n(a),r=n(9),o=(n(95),n(96),n(90)),l=n(3),d=n(2),j="https://imprima.app/api",u="".concat(j,"/product/?kind_id={kindId}"),b="".concat(j,"/product/{id}"),p="".concat(j,"/merchant/?type_id={id}&cep={cep}"),m=("".concat(j,"/category"),"".concat(j,"/product/?category_id={categoryId}&type_id={typeId}"),"".concat(j,"/merchant_type_attribute/?type_id={typeId}&merchant_id={merchantId}")),h="".concat(j,"/order/create"),O="".concat(j,"/image"),f=(n(97),n(0));function v(e){var t=e.children;e.stackclose;return Object(f.jsx)("div",{className:"header",children:t})}n(99);function x(e){var t=e.children;return Object(f.jsx)("div",{className:"body",children:t})}n(100);function g(e){var t=e.size;return Object(f.jsxs)("div",{className:"lds-ring ".concat(t),children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})}n(101);function C(e){var t=e.size;return Object(f.jsx)("svg",{width:"23",height:"39",viewBox:"0 0 23 39",style:{transform:"scale(".concat("small"===t?"1":"0.8",")"),fill:"#444"},children:Object(f.jsx)("path",{className:"slideshow-arrow",d:"M857.005,231.479L858.5,230l18.124,18-18.127,18-1.49-1.48L873.638,248Z",transform:"translate(-855 -230)"})})}function y(e){var t=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},n=e?function(n){return t(e,n)}:function(e,n){return t(e,n)},c=function(e){return JSON.parse(localStorage.getItem(e))};return[e?c(e):function(e){return c(e)},n]}function N(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(!1),s=Object(d.a)(a,2),r=s[0],o=s[1],j=Object(l.f)(),b=y("privacy"),p=Object(d.a)(b,2),m=p[0],h=p[1],O=Object(c.useState)(!0),N=Object(d.a)(O,2),L=N[0],w=N[1];Object(c.useEffect)((function(){var e=0;return window.onbeforeunload=function(t){0==e&&(S(),e=1)},window.onpopstate=function(e){S()},function(){window.onbeforeunload=function(){},window.onpopstate=function(){}}}),[]);var S=function(){parent.postMessage({active:!1},"*")};return Object(c.useEffect)((function(){o(!0),fetch(u.replace("{kindId}",localStorage.getItem("kindId")||"")).then((function(e){return e.json()})).then((function(e){i(e),o(!1)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{stackclose:-1,children:Object(f.jsxs)("div",{className:"logo",children:[Object(f.jsx)("a",{href:"https://imprima.app",rel:"noreferrer",className:"logo-link",children:Object(f.jsx)("div",{className:"inner",children:Object(f.jsx)("img",{src:"https://imprima.app/img/logo_100.png",alt:""})})}),Object(f.jsx)("h1",{children:"Criar personalizado"})]})}),Object(f.jsx)(x,{children:r&&Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)(g,{size:"large"})})||Object(f.jsx)("div",{className:"page-items",children:Object(f.jsx)("div",{className:"options",children:n.map((function(e){return Object(f.jsxs)("div",{className:"option",onClick:function(){return function(e){j.push("/criador/produto/".concat(e.id).concat(location.search))}(e)},children:[Object(f.jsxs)("div",{className:"left",children:[Object(f.jsx)("img",{src:e.thumb_url,alt:"",className:"image"}),Object(f.jsx)("span",{children:e.name})]}),Object(f.jsx)("span",{className:"select",children:Object(f.jsx)(C,{})})]},e.name)}))})})}),!m&&L&&Object(f.jsxs)("div",{className:"privacy",children:[Object(f.jsx)("h1",{children:"Nos importamos com sua privacidade"}),Object(f.jsx)("p",{children:"Ao continuar voc\xea concorda em compartilhar informa\xe7\xf5es pessoais para que possamos aprimorar a experi\xeancia."}),Object(f.jsx)("div",{className:"bottomside",children:Object(f.jsx)("button",{className:"accept",onClick:function(){h(!0),w(!1)},children:"Concordar"})})]})]})}var L=n(53);function w(){return Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(f.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(f.jsx)("path",{d:"M0 0H16V16H0z",transform:"matrix(1 0 0 -1 0 16)"}),Object(f.jsx)("path",{fill:"#444",fillRule:"nonzero",d:"M7.631 1.333L6.368 0 0 6.667 6.368 13.333 7.631 12.001 3.428 7.6 13.333 7.601 13.333 5.743 3.418 5.742z",transform:"matrix(1 0 0 -1 0 16) translate(1.333 1.333)"})]})})}n(106),n(107);var S=n(21),_=(n(115),n(80)),k=n.n(_),I={result:null,filename:null,filetype:null,src:null,error:null},A=["Arial Black","Pacifico","Zilla Slab Highlight","Quicksand","VT323"],M={Bandeiras:["bandeiras/00Brasil.png","bandeiras/01EUA.png","bandeiras/02Reino_Unido.png","bandeiras/03Alemanha.png","bandeiras/04Canad\xe1.png"],"Animais D\xf3ceis":["animais_doceis/00Gatinho.png","animais_doceis/01C\xe3ozinho.png","animais_doceis/02C\xe3es_Desconfiados.png"],Frases:["frases/00Inspire_o_Mundo.png","frases/01Nunca_foi_sorte.png","frases/02Tudo_posso.png","frases/03Meu_filho_tem_bigode.png","frases/04Inspira_respira_nao_pira.png","frases/05Queira_o_bem.png","frases/06Fazer_o_bem.png","frases/07Viva_simples.png","frases/08Deixe_a_felicidade_entrar.png","frases/09Deus_no_comando.png","frases/10Desistir_jamais.png"],"Datas Especiais":["datas_especiais/00Melhor_mae_do_mundo.png","datas_especiais/01Obrigado_mae.png","datas_especiais/02Feliz_dia_das_maes.png"]},H=["Bandeiras","Animais D\xf3ceis","Frases","Datas Especiais"];function T(e){var t=e.canvas,n=e.visible,i=e.width,a=e.setFontSelectorVisible,s=Object(c.useRef)(),r=Object(c.useRef)();function o(e){var t=e.selected[0];"text"===t.type?(a(!0),setTimeout((function(){s.current.value=t.get("fontFamily"),r.current.value=t.get("fill")}),100)):a(!1)}return Object(c.useEffect)((function(){t&&(t.on("selection:created",o),t.on("selection:updated",o),t.on("selection:cleared",(function(){return a(!1)})))}),[t]),n?Object(f.jsxs)("div",{className:"font-selector",style:{width:i+"px"},children:[Object(f.jsx)("label",{children:"Estilo da letra: "}),Object(f.jsx)("select",{ref:s,onChange:function(e){var n;"Arial Black"!==e.target.value?(n=e.target.value,new k.a(n).load().then((function(){t.getActiveObject().set("fontFamily",n),t.requestRenderAll()})).catch((function(e){console.log(e),alert("erro ao carregar a fonte "+n)}))):(t.getActiveObject().set("fontFamily",e.target.value),t.requestRenderAll())},children:A.map((function(e){return Object(f.jsx)("option",{value:e,children:e},e)}))}),Object(f.jsx)("input",{ref:r,className:"input-color",type:"color",name:"color",value:"#000000",onChange:function(e){t.getActiveObject().set("fill",e.target.value),t.requestRenderAll()}})]}):Object(f.jsx)(f.Fragment,{})}var V=n(5),R=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M22 20.7L3.3 2L2 3.3L3 4.3V19C3 20.1 3.9 21 5 21H19.7L20.7 22L22 20.7M5 19V6.3L12.6 13.9L11.1 15.8L9 13.1L6 17H15.7L17.7 19H5M8.8 5L6.8 3H19C20.1 3 21 3.9 21 5V17.2L19 15.2V5H8.8"})})},F=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z"})})},P=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})})},B=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M5,3A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H14.09C14.03,20.67 14,20.34 14,20C14,19.32 14.12,18.64 14.35,18H5L8.5,13.5L11,16.5L14.5,12L16.73,14.97C17.7,14.34 18.84,14 20,14C20.34,14 20.67,14.03 21,14.09V5C21,3.89 20.1,3 19,3H5M19,16V19H16V21H19V24H21V21H24V19H21V16H19Z"})})},E=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5M17,9.5C17,10.3 16.3,11 15.5,11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8C16.3,8 17,8.7 17,9.5M12,17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,17.23Z"})})},D=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})})},q=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"})})},z=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M15.5,9C16.2,9 16.79,8.76 17.27,8.27C17.76,7.79 18,7.2 18,6.5C18,5.83 17.76,5.23 17.27,4.73C16.79,4.23 16.2,4 15.5,4C14.83,4 14.23,4.23 13.73,4.73C13.23,5.23 13,5.83 13,6.5C13,7.2 13.23,7.79 13.73,8.27C14.23,8.76 14.83,9 15.5,9M19.31,8.91L22.41,12L21,13.41L17.86,10.31C17.08,10.78 16.28,11 15.47,11C14.22,11 13.16,10.58 12.3,9.7C11.45,8.83 11,7.77 11,6.5C11,5.27 11.45,4.2 12.33,3.33C13.2,2.45 14.27,2 15.5,2C16.77,2 17.83,2.45 18.7,3.33C19.58,4.2 20,5.27 20,6.5C20,7.33 19.78,8.13 19.31,8.91M16.5,18H5.5L8.25,14.5L10.22,16.83L12.94,13.31L16.5,18M18,13L20,15V20C20,20.55 19.81,21 19.41,21.4C19,21.79 18.53,22 18,22H4C3.45,22 3,21.79 2.6,21.4C2.21,21 2,20.55 2,20V6C2,5.47 2.21,5 2.6,4.59C3,4.19 3.45,4 4,4H9.5C9.2,4.64 9.03,5.31 9,6H4V20H18V13Z"})})};function U(e){var t=e.canvas,n=e.imgProcs,i=e.setDrop,a=e.setShowCanvas,s=e.setDropping,r=e.setImgProcs,o=e.loadingImg,l=e.setLoadingImg,j=e.setModal,u=Object(c.useState)(),b=Object(d.a)(u,2),p=b[0],m=b[1],h=Object(c.useState)(),O=Object(d.a)(h,2),v=O[0],x=O[1],g=Object(c.useState)(),C=Object(d.a)(g,2),y=C[0],N=C[1],L=Object(c.useState)(),w=Object(d.a)(L,2),S=w[0],_=w[1];function k(e){switch(e.selected[0].type){case"text":m(!0);break;case"photo":x(!0);break;case"emoji":N(!0);break;case"repo":_(!0)}}return Object(c.useEffect)((function(){t&&(t.on("selection:created",k),t.on("selection:updated",k),t.on("selection:cleared",(function(){m(!1),x(!1),N(!1),_(!1)})))}),[t]),Object(f.jsxs)("div",{className:"palet",children:[Object(f.jsx)("button",{onClick:function(){return a(!1),s(!0),void i(I)},children:Object(f.jsx)(B,{})}),Object(f.jsx)("button",{onClick:function(){j({open:"repo",title:"Escolha o modelo para adicionar"})},children:Object(f.jsx)(z,{})}),Object(f.jsx)("button",{onClick:function(){return function(){var e=new fabric.Textbox("",{fontSize:26,fontFamily:"Arial Black",left:140,top:100,width:80,fill:"black"});e.type="text",e.enterEditing(),e.hiddenTextarea.focus(),t.setActiveObject(e),t.add(e)}()},children:Object(f.jsx)(F,{})}),Object(f.jsx)("button",{onClick:function(){j({open:"emoji",title:"Escolha o emoji para adicionar"})},children:Object(f.jsx)(E,{})}),v&&Object(f.jsx)("button",{onClick:function(){return function(){var e=t.getActiveObject();if(e&&!o){var c=n.findIndex((function(t){return t.obj===e}));if(-1!==c){var i=n[c];i.active=i.active===i.image_in?i.image_out:i.image_in,l(!0),fabric.Image.fromURL("https://imprima.app/"+i.active,(function(a){t.remove(e),a.top=i.obj.top,a.left=i.obj.left,a.scaleX=i.obj.scaleX,a.scaleY=i.obj.scaleY,a.type="photo",i.obj=a,t.add(a),t.setActiveObject(a),n.splice(c,1),r([i].concat(Object(V.a)(n))),l(!1)}))}}}()},children:Object(f.jsx)(R,{})}),(p||v||y||S)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){t.remove(t.getActiveObject())},children:Object(f.jsx)(P,{})}),Object(f.jsx)("button",{onClick:function(){t.getActiveObject().sendToBack()},children:Object(f.jsx)(q,{})}),Object(f.jsx)("button",{onClick:function(){t.getActiveObject().bringToFront()},children:Object(f.jsx)(D,{})})]})]})}var W=n(81),Z=n.n(W),J=n(82),$=n.n(J);function X(e){var t=e.drop,n=e.dropping,i=e.onDrop,a=e.imgProcs,s=e.setDrop,r=e.setShowCanvas,o=e.setDropping,l=e.setImgProcs,j=e.setLoadingImg,u=e.canvasHeight,b=e.canvas,p=Object(c.useState)(!1),m=Object(d.a)(p,2),h=m[0],v=m[1];function x(){var e=t.filename,n=t.filetype,c=t.result;console.log("image",{filename:e,filetype:n,result:c}),v(!0);var i=function(e,t){for(var n=e.split(","),c=n[0].match(/:(.*?);/)[1],i=atob(n[1]),a=i.length,s=new Uint8Array(a);a--;)s[a]=i.charCodeAt(a);return new File([s],t,{type:c})}(c,"image.jpg");new Z.a(i,{quality:.6,maxWidth:1e3,success:function(t){console.log("CompressorResult",t);var c=new FileReader;c.readAsDataURL(t),c.onloadend=function(){var t=c.result;fetch(O,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:e,filetype:n,result:t})}).then((function(e){return e.json()})).then((function(e){v(!1),j(!0),fabric.Image.fromURL("https://imprima.app/"+e.image_out,(function(t){e.obj=t,e.active=e.image_out,t.scaleToWidth(180),t.type="photo",b.add(t),l([].concat(Object(V.a)(a),[e])),j(!1),o(!1),r(!0)}),{crossOrigin:"Anonymous"})})).catch((function(e){return v(!1)}))}},error:function(e){console.log(e.message),v(!1)}})}return Object(c.useEffect)((function(){if(n){var e=document.querySelector(".dropzone-instructions--main");if(e){e.innerText="Para enviar a imagem, clique ou arraste aqui.";var t=document.querySelectorAll(".dropzone-instructions--sub");t[0].innerText="Arquivos aceitos: .jpeg, .jpg, .png",t[1].innerText="Tamanho m\xe1ximo: 10MB"}}}),[n]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)($.a,{onChange:i,value:t,maxFileSize:10485760,canvasHeight:u+"px",cropperOptions:{guides:!0,viewMode:2,autoCropArea:1,movable:!1,zoomable:!1,dragMode:"none",rotatable:!1,scalable:!1,checkOrientation:!1}}),h&&Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)(g,{})})||Object(f.jsxs)("div",{className:"btn-drop-container",children:[Object(f.jsx)("button",{className:"btn-drop",onClick:function(){return r(!0),o(!1),void s(I)},children:"\u2716 cancelar"}),t.filename&&Object(f.jsx)("button",{className:"btn-drop confirm",onClick:function(){return x()},children:"\u2714 enviar"})]})]})}var Q;n(123),n(124);function Y(e){var t=e.header,n=e.children,c=e.title,i=e.onClose,a=e.open,s=e.innerWidth;return a?Object(f.jsxs)("div",{className:"modal",children:[Object(f.jsx)("div",{className:"modal-overlay",style:{width:s+80}}),Object(f.jsxs)("div",{className:"modal-options",style:{width:s},children:[Object(f.jsxs)("div",{className:"motitle",children:[Object(f.jsx)("span",{className:"motext",children:c}),Object(f.jsx)("span",{className:"moclose",onClick:i,children:"\xd7"})]}),t,Object(f.jsx)("div",{className:"modal-container",children:n})]})]}):Object(f.jsx)(f.Fragment,{})}var G=Object(c.forwardRef)((function(e,t){var n=e.type_id,i=e.xcanvas,a=e.setXCanvas,s=e.startImage,r=Object(c.useState)(I),o=Object(d.a)(r,2),l=o[0],j=o[1],u=Object(c.useState)(!0),b=Object(d.a)(u,2),p=b[0],m=b[1],h=Object(c.useState)([]),O=Object(d.a)(h,2),v=O[0],x=O[1],g=Object(c.useState)(),C=Object(d.a)(g,2),y=C[0],N=C[1],L=Object(c.useState)(!1),w=Object(d.a)(L,2),_=w[0],k=w[1],A=Object(c.useState)(!1),V=Object(d.a)(A,2),R=V[0],F=V[1],P=Object(c.useState)({}),B=Object(d.a)(P,2),E=B[0],D=B[1],q=Object(c.useState)("Frases"),z=Object(d.a)(q,2),W=z[0],Z=z[1],J=window.innerWidth>505?506:window.innerWidth-32;Object(c.useEffect)((function(){var e;return e="https://imprima.app/img/default/".concat(n,".png"),S.fabric.Image.fromURL(e,(function(e){e.scaleToWidth(J),Q.setBackgroundImage(e),Q.renderAll()}),{crossOrigin:"Anonymous"}),Q=new S.fabric.Canvas("fabric-area",{preserveObjectStacking:!0}),a(Q),function(){Q.dispose()}}),[]),Object(c.useEffect)((function(){s&&S.fabric.Image.fromURL(s,(function(e){console.log("oImg",e,Q),e.scaleToWidth(180),e.set("top",10),e.setCoords(),e.type="repo",Q.add(e)}),{crossOrigin:"Anonymous"})}),[s]);var $=J/506*440;return Object(f.jsxs)("div",{className:"editor",children:[Object(f.jsx)("div",{style:{display:p?"flex":"none"},children:Object(f.jsxs)("div",{style:{display:"flex",width:J+16+"px"},children:[Object(f.jsx)("canvas",{ref:t,id:"fabric-area",width:J-26,height:$}),Object(f.jsx)(T,{canvas:i,visible:_,width:J-26,setFontSelectorVisible:k}),Object(f.jsx)(U,{canvas:i,imgProcs:v,setDrop:j,setShowCanvas:m,setDropping:N,setImgProcs:x,loadingImg:R,setLoadingImg:F,setModal:D})]})}),Object(f.jsx)(Y,{title:E.title,open:"emoji"===E.open,innerWidth:J,onClose:function(){return D({})},children:Array(323).fill().map((function(e,t){return Object(f.jsx)("div",{style:{backgroundPosition:42*-t+"px"},className:"emoji",onClick:function(){return e=t+111,S.fabric.Image.fromURL("https://imprima.app/img/emoji/".concat(e,".png"),(function(e){e.scaleToWidth(70),e.type="emoji",Q.add(e)}),{crossOrigin:"Anonymous"}),void D({});var e}},t)}))}),Object(f.jsx)(Y,{title:E.title,open:"repo"===E.open,innerWidth:J,onClose:function(){return D({})},header:Object(f.jsxs)("div",{style:{marginLeft:"10px",fontSize:"13px"},children:["categoria:"," ",Object(f.jsx)("select",{onChange:function(e){console.log("onSelectCategory",e),Z(e.target.value)},defaultValue:W,children:H.map((function(e){return Object(f.jsx)("option",{value:e,children:e},e)}))})]}),children:M[Object.keys(M).find((function(e){return e===W}))].map((function(e,t){return Object(f.jsx)("img",{className:"repo",src:"https://imprima.app/img/repo/".concat(e),onClick:function(){return t=e,S.fabric.Image.fromURL("https://imprima.app/img/repo/".concat(t),(function(e){e.scaleToWidth(120),e.type="repo",Q.add(e)}),{crossOrigin:"Anonymous"}),void D({});var t}},t)}))}),y&&Object(f.jsx)(X,{canvas:i,drop:l,dropping:y,onDrop:function(e){j(e)},imgProcs:v,setDrop:j,setShowCanvas:m,setDropping:N,setImgProcs:x,loadingImg:R,setLoadingImg:F,canvasHeight:$})]})}));function K(){var e=Object(l.g)().id,t=Object(c.useState)(!1),n=Object(d.a)(t,2),i=n[0],a=n[1],s=Object(c.useState)(),r=Object(d.a)(s,2),o=r[0],j=r[1],u=Object(l.f)(),p=Object(c.useRef)(),m=Object(c.useState)(),h=Object(d.a)(m,2),O=h[0],C=h[1],N=y("selected"),S=Object(d.a)(N,2)[1];return Object(c.useEffect)((function(){a(!0),fetch(b.replace("{id}",e)).then((function(e){return e.json()})).then((function(e){console.log("selected",e),a(!1),j(e)})).catch((function(e){return a(!1)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{stackclose:-2,children:Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("div",{onClick:function(){return u.goBack()},children:Object(f.jsx)(w,{})}),Object(f.jsx)("div",{children:o?(null===o||void 0===o?void 0:o.name.split(" ")[0])+" personalizada":""})]})}),Object(f.jsx)(x,{children:i&&Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)(g,{size:"large"})})||Object(f.jsxs)("div",{className:"page-detail",children:[Object(f.jsx)("div",{className:"item",children:(null===o||void 0===o?void 0:o.type_id)&&Object(f.jsx)(G,{ref:p,type_id:null===o||void 0===o?void 0:o.type_id,xcanvas:O,setXCanvas:C,startImage:null===o||void 0===o?void 0:o.url})}),Object(f.jsxs)("div",{className:"instructions",children:[Object(f.jsx)(ee,{}),Object(f.jsx)("span",{children:"Arraste a imagem para reposicionar."})]}),Object(f.jsxs)("div",{className:"instructions",children:[Object(f.jsx)(ee,{}),Object(f.jsx)("span",{children:"Voc\xea pode modificar a estampa como quiser, ou enviar a sua imagem, experimente a barra de ferramentas ao lado."})]}),Object(f.jsxs)("div",{className:"instructions",children:[Object(f.jsx)(ee,{}),Object(f.jsx)("span",{children:"Ao adicionar texto, clique fora da caixa e resselecione para mover."})]}),Object(f.jsx)("div",{className:"btn-next",children:Object(f.jsx)("button",{className:"next",onClick:function(){var e;null===O||void 0===O||O.discardActiveObject(),null===O||void 0===O||O.renderAll(),S(Object(L.a)(Object(L.a)({},o),{},{url:null===(e=p.current)||void 0===e?void 0:e.toDataURL({multiplier:3}),name:(null===o||void 0===o?void 0:o.name.split(" ")[0])+" personalizada"})),u.push("/criador/fornecedor")},children:"Continuar"})})]})})]})}var ee=function(){return Object(f.jsx)("svg",{className:"icon-info",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"})})};n(125);function te(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(null),s=Object(d.a)(a,2),r=s[0],o=s[1],j=Object(c.useRef)(),u=Object(l.f)(),b=y("selected"),m=Object(d.a)(b,1)[0],h=Object(c.useState)(),O=Object(d.a)(h,2),N=O[0],L=O[1];function S(){i(!0);var e=j.current.value;fetch(p.replace("{id}",m.type_id).replace("{cep}",e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:m.url})}).then((function(e){return e.json()})).then((function(e){console.log(e),i(!1),o(e.merchants),localStorage.setItem("address",JSON.stringify(e.address||"{}")),L(e.url)})).catch((function(e){alert("erro"),i(!1)}))}return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("address"));(null===e||void 0===e?void 0:e.cep)&&(j.current.value=e.cep,S())}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{stackclose:-2,children:Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("div",{onClick:function(){return u.goBack()},children:Object(f.jsx)(w,{})}),Object(f.jsx)("div",{children:"Selecione fornecedor"})]})}),Object(f.jsx)(x,{children:Object(f.jsx)("div",{className:"page-merchant",children:Object(f.jsxs)("div",{className:"stores",children:[Object(f.jsx)("p",{children:"Agora, vamos buscar quem fabrica em sua regi\xe3o."}),Object(f.jsxs)("div",{className:"find",children:[Object(f.jsx)("input",{ref:j,onKeyUp:function(e){"Enter"===e.key&&S()},placeholder:"Digite seu CEP"}),Object(f.jsx)("button",{onClick:function(){return S()},children:n&&Object(f.jsx)(g,{})||"\ud83d\udd0d"})]}),Object(f.jsx)("div",{className:"list",children:r&&((null===r||void 0===r?void 0:r.length)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"item",children:[Object(f.jsx)("div",{className:"i1 b",children:"Fornecedor"}),Object(f.jsx)("span",{className:"i5",children:"\xa0"})]}),r.map((function(e){return Object(f.jsxs)("div",{className:"item",children:[Object(f.jsxs)("div",{className:"i1",children:[e.name,Object(f.jsx)("br",{}),Object(f.jsxs)("span",{className:"small",children:[e.city," - ",e.uf," (",e.distance.replace(".",","),")"]})]}),Object(f.jsx)("span",{className:"i5",onClick:function(){return window.open("https://api.whatsapp.com/send?phone=".concat(e.phone,"&text=Ol\xe1,%20gostaria%20de%20saber%20o%20valor%20e%20se%20possui%20estoque%20").concat(N),"_blank")},children:Object(f.jsx)(C,{size:"small"})})]},e.id)}))]})||Object(f.jsx)("h3",{children:"Nenhum fornecedor na sua localidade."}))})]})})})]})}n(126);function ne(){var e,t,n,i=Object(l.g)(),a=i.typeId,s=i.merchantId,o=Object(l.f)(),j=y("checkout"),u=Object(d.a)(j,2),b=(u[0],u[1]),p=Object(c.useState)(!1),h=Object(d.a)(p,2),O=h[0],C=h[1],N=y("selected"),L=Object(d.a)(N,2),S=L[0],_=(L[1],Object(c.useState)()),k=Object(d.a)(_,2),I=k[0],A=k[1],M=Object(c.useState)(),H=Object(d.a)(M,2),T=H[0],R=H[1],F=Object(c.useState)(),P=Object(d.a)(F,2),B=P[0],E=P[1],D=Object(c.useState)(),q=Object(d.a)(D,2),z=q[0],U=q[1],W=Object(c.useState)(),Z=Object(d.a)(W,2),J=Z[0],$=Z[1],X=Object(c.useState)(1),Q=Object(d.a)(X,2),Y=Q[0],G=(Q[1],Object(c.useState)(0)),K=Object(d.a)(G,2),ee=K[0],te=K[1],ne=Object(c.useState)(),ie=Object(d.a)(ne,2),ae=ie[0],se=ie[1],re=Object(c.useState)([]),oe=Object(d.a)(re,2),le=oe[0],de=oe[1];function je(e,t){te(t),se(e*t)}function ue(e,t){var n=le[e].quantity+t,c=Object(V.a)(le);0===n?c.splice(e,e+1):c[e].quantity=n,de(c)}return Object(c.useEffect)((function(){C(!0),fetch(m.replace("{typeId}",a).replace("{merchantId}",s),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){var t;E(e.attributes);var n=e.attributes.filter((function(e){return!e.price}));n=(null===(t=n)||void 0===t?void 0:t.length)?n:e.attributes,R(n),A(e.merchant),C(!1)})).catch((function(e){return C(!1)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{stackclose:-3,children:Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("div",{onClick:function(){return o.goBack()},children:Object(f.jsx)(w,{})}),Object(f.jsx)("div",{children:null===I||void 0===I?void 0:I.name})]})}),Object(f.jsx)(x,{children:O&&Object(f.jsx)("div",{className:"loader-container",children:Object(f.jsx)(g,{size:"large"})})||Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"page-checkout",children:[Object(f.jsx)("h5",{children:null===S||void 0===S?void 0:S.name}),Object(f.jsxs)("div",{className:"first",children:[Object(f.jsx)("div",{className:"left-container",children:Object(f.jsx)("img",{src:null===S||void 0===S?void 0:S.url,alt:null===S||void 0===S?void 0:S.name})}),Object(f.jsxs)("div",{className:"right-container",children:[Object(f.jsxs)("div",{className:"attributes-container",children:[T&&T[0].name,Object(f.jsx)("div",{className:"options",children:null===T||void 0===T?void 0:T.map((function(e,t){return Object(f.jsx)("div",{className:"button-check ".concat(z===e.id&&"selected"),onClick:function(){U(e.id),e.price?$(e):$(null),je(Y,e.price)},children:e.value},t)}))})]}),z&&(null===B||void 0===B||null===(e=B.find((function(e){return e.merchant_type_attribute_id===z})))||void 0===e?void 0:e.name)&&Object(f.jsxs)("div",{className:"attributes-container",children:[null===B||void 0===B||null===(t=B.find((function(e){return e.merchant_type_attribute_id===z})))||void 0===t?void 0:t.name,Object(f.jsx)("div",{className:"options",children:null===(n=B.filter((function(e){return e.merchant_type_attribute_id===z})))||void 0===n?void 0:n.map((function(e,t){return Object(f.jsx)("div",{className:"button-check ".concat((null===J||void 0===J?void 0:J.id)===e.id&&"selected"),onClick:function(){je(Y,e.price),$(e)},children:e.value},t)}))})]}),ae&&Object(f.jsxs)("div",{className:"price-container",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:"Pre\xe7o"}),Object(f.jsx)("div",{children:ae&&"R$".concat(ae)||Object(f.jsx)("small",{children:"selecione"})})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{className:"button-cart-add",onClick:function(){return function(){var e=null===B||void 0===B?void 0:B.find((function(e){return e.id===z})),t=null===B||void 0===B?void 0:B.find((function(e){return e.id===J.id})),n="".concat(e.value===t.value?"":e.value+" ").concat(t.name," ").concat(t.value);le.find((function(e){return e.detail===n}))?r.b.info("\ud83d\uded2 Produto j\xe1 adicionado no carrinho.",{position:r.b.POSITION.TOP_CENTER}):de([].concat(Object(V.a)(le),[{id:t.id,detail:n,price:ee,quantity:Y}])),$(null),U(null),je(null)}()},children:Object(f.jsx)(ce,{})})})]})||""]})]}),Object(f.jsx)("div",{children:Object(f.jsx)("div",{className:"list",children:le&&(null===le||void 0===le?void 0:le.length)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"item",children:[Object(f.jsx)("div",{className:"i1 b",children:"Resumo"}),Object(f.jsx)("div",{className:"i2 b",children:"Pre\xe7o"}),Object(f.jsx)("div",{className:"i3 b",children:"Quantidade"})]}),Object(f.jsx)("div",{className:"items",children:le.map((function(e,t){return Object(f.jsxs)("div",{className:"item",children:[Object(f.jsx)("div",{className:"i1",children:e.detail}),Object(f.jsxs)("div",{className:"i2",children:["R$",e.price]}),Object(f.jsxs)("div",{className:"i3",children:[Object(f.jsx)("input",{type:"button",value:"-",onClick:function(){return ue(t,-1)}}),Object(f.jsx)("span",{children:e.quantity}),Object(f.jsx)("input",{type:"button",value:"+",onClick:function(){return ue(t,1)}})]})]},t)}))}),Object(f.jsxs)("div",{className:"total",children:["Total: R$",le.reduce((function(e,t){return e+t.price*t.quantity}),0)]})]})||""})}),Object(f.jsx)("div",{className:"next",children:Object(f.jsx)("button",{onClick:function(){le.length?(b({merchant:I,cart:le}),o.push("/criador/pedido-info")):r.b.info("\ud83d\uded2 Coloque o produto no carrinho.",{position:r.b.POSITION.TOP_CENTER})},children:"Continuar"})})]})})})]})}var ce=function(){return Object(f.jsx)("svg",{className:"icon",viewBox:"0 0 24 24",children:Object(f.jsx)("path",{fill:"currentColor",d:"M9 20C9 21.11 8.11 22 7 22S5 21.11 5 20 5.9 18 7 18 9 18.9 9 20M17 18C15.9 18 15 18.9 15 20S15.9 22 17 22 19 21.11 19 20 18.11 18 17 18M7.17 14.75L7.2 14.63L8.1 13H15.55C16.3 13 16.96 12.59 17.3 11.97L21.16 4.96L19.42 4H19.41L18.31 6L15.55 11H8.53L8.4 10.73L6.16 6L5.21 4L4.27 2H1V4H3L6.6 11.59L5.25 14.04C5.09 14.32 5 14.65 5 15C5 16.11 5.9 17 7 17H19V15H7.42C7.29 15 7.17 14.89 7.17 14.75M18 2.76L16.59 1.34L11.75 6.18L9.16 3.59L7.75 5L11.75 9L18 2.76Z"})})},ie=n(50),ae=n.n(ie),se=n(83),re=n(6),oe=n(51),le=n.n(oe),de=n(86),je=(n(131),n(22)),ue=je.a().shape({name:je.b().required("Nome \xe9 obrigat\xf3rio"),street:je.b().required("Campo obrigat\xf3rio"),neighborhood:je.b().required("Campo obrigat\xf3rio"),note:je.b()});function be(){var e=y("checkout"),t=Object(d.a)(e,1)[0],n=y("selected"),i=Object(d.a)(n,1)[0],a=y("address"),s=Object(d.a)(a,1)[0],o=Object(l.f)(),j=Object(c.useState)(),u=Object(d.a)(j,2),b=u[0],p=u[1],m=t.cart,O=t.merchant,C=Object(c.useState)(!1),N=Object(d.a)(C,2),L=N[0],S=N[1];function _(e){var t=e.name,n=e.cellphone,c=e.cpf,a=e.street,r=e.number,o=e.neighborhood,l=e.complement,d=e.note;p(!0),fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:{merchant_id:null===O||void 0===O?void 0:O.id,name:t,cpf:c,cellphone:n,street:a,number:r,neighborhood:o,complement:l,zip:s.cep,city:s.localidade,uf:s.uf,note:d,origin:localStorage.getItem("origin"),product_name:i.name,image:i.url,type_id:i.type_id},order_items:m})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.init_point&&(parent.location.href=e.init_point),p(!1)})).catch((function(e){alert("erro"),p(!1)}))}return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{stackclose:-4,children:Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("div",{onClick:function(){return o.goBack()},children:Object(f.jsx)(w,{})}),Object(f.jsx)("div",{children:"Resumo do pedido"})]})}),Object(f.jsx)(x,{children:Object(f.jsxs)("div",{className:"page-checkout-info",children:[Object(f.jsxs)("div",{className:"product-details",children:[Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["".concat(null===i||void 0===i?void 0:i.name),Object(f.jsxs)("div",{className:"link-detail",onClick:function(){return S(!L)},children:[L?"esconder":"ver"," detalhes"]})]}),L&&Object(f.jsxs)("div",{children:[m.map((function(e,t){return Object(f.jsx)("div",{style:{fontSize:"12px"},children:e.quantity+"x "+e.detail+" R$"+e.price},t)})),"Total: R$",m.reduce((function(e,t){return e+t.price*t.quantity}),0)]})||""]}),Object(f.jsx)("h5",{children:"Vendedor:"}),Object(f.jsxs)("div",{className:"seller",children:[null===O||void 0===O?void 0:O.name,Object(f.jsx)("br",{}),null===O||void 0===O?void 0:O.address,", ",null===O||void 0===O?void 0:O.address_extra," -"," ",null===O||void 0===O?void 0:O.neighborhood,", ",null===O||void 0===O?void 0:O.city,", ",null===O||void 0===O?void 0:O.uf]}),Object(f.jsx)(re.d,{initialValues:{name:"",cpf:"",street:s.logradouro,neighborhood:s.bairro,cellphone:""},onSubmit:function(){var e=Object(se.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:if(console.log("values",t),t.cpf=t.cpf.replace(/[^0-9\.]+/g,""),de.a.isValid(t.cpf)){e.next=7;break}return r.b.error("CPF inv\xe1lido.",{position:r.b.POSITION.TOP_CENTER}),e.abrupt("return");case 7:if(t.cellphone=t.cellphone.replace(/[^0-9\.]+/g,""),!(t.cellphone.length<10)){e.next=11;break}return r.b.error("Informe o celular com DDD.",{position:r.b.POSITION.TOP_CENTER}),e.abrupt("return");case 11:_(t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:ue,children:function(e){var t=e.setFieldValue;return Object(f.jsxs)(re.c,{className:"buyer",children:[Object(f.jsx)("div",{children:"Complete seus dados"}),Object(f.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(f.jsx)(re.b,{name:"name",placeholder:"Nome completo",type:"text",style:{width:"50%"}}),Object(f.jsx)(re.b,{component:le.a,mask:"999.999.999-99",name:"cpf",placeholder:"CPF",type:"text",style:{width:"50%"},onChange:function(e){t("cpf",e.target.value||"")}})]}),Object(f.jsx)("div",{style:{display:"flex",width:"100%"},children:Object(f.jsx)(re.a,{component:"span",name:"name"})}),Object(f.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(f.jsx)(re.b,{name:"street",placeholder:"Rua",type:"text",style:{width:"70%"}}),Object(f.jsx)(re.b,{name:"number",placeholder:"N\xfamero",type:"text",style:{width:"30%"}})]}),Object(f.jsx)("div",{style:{display:"flex",width:"100%"},children:Object(f.jsx)(re.a,{component:"span",name:"street"})}),Object(f.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(f.jsx)(re.b,{name:"neighborhood",placeholder:"Bairro",type:"text",style:{width:"50%"}}),Object(f.jsx)(re.b,{name:"complement",placeholder:"Complemento",type:"text",style:{width:"50%"}})]}),Object(f.jsx)("div",{style:{display:"flex",width:"100%"},children:Object(f.jsx)(re.a,{component:"span",name:"neighborhood"})}),Object(f.jsx)(re.b,{component:le.a,mask:"(99) 999999999",name:"cellphone",placeholder:"Celular com DDD",onChange:function(e){t("cellphone",e.target.value||"")},type:"text"}),Object(f.jsx)(re.a,{component:"span",name:"cellphone"}),Object(f.jsx)(re.b,{name:"note",placeholder:"Informa\xe7\xf5es adicionais",type:"text"}),Object(f.jsx)(re.a,{component:"span",name:"note"}),b&&Object(f.jsx)(g,{})||Object(f.jsx)("button",{type:"submit",children:"Pagar"})]})}})]})})]})}var pe=function(){return Object(f.jsx)(o.a,{children:Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{path:"/criador/",exact:!0,children:Object(f.jsx)(N,{})}),Object(f.jsx)(l.a,{path:"/criador/produto/:id",children:Object(f.jsx)(K,{})}),Object(f.jsx)(l.a,{path:"/criador/fornecedor",children:Object(f.jsx)(te,{})}),Object(f.jsx)(l.a,{path:"/criador/pedido/:typeId/:merchantId",children:Object(f.jsx)(ne,{})}),Object(f.jsx)(l.a,{path:"/criador/pedido-info",children:Object(f.jsx)(be,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=new URLSearchParams(window.location.search);localStorage.setItem("kindId",me.get("kindId")||0),localStorage.setItem("imprimaId",me.get("imprimaId")||""),localStorage.setItem("origin",me.get("origin")||""),s.a.render(Object(f.jsxs)(i.a.StrictMode,{children:[Object(f.jsx)(r.a,{}),Object(f.jsx)(pe,{})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},96:function(e,t,n){},97:function(e,t,n){},99:function(e,t,n){}},[[230,1,2]]]);
//# sourceMappingURL=main.b435708d.chunk.js.map